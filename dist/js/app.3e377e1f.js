(function(t){function e(e){for(var i,o,n=e[0],l=e[1],c=e[2],d=0,u=[];d<n.length;d++)o=n[d],s[o]&&u.push(s[o][0]),s[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);m&&m(e);while(u.length)u.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,n=1;n<a.length;n++){var l=a[n];0!==s[l]&&(i=!1)}i&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var i={},s={app:0},r=[];function o(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=i,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(a,i,function(e){return t[e]}.bind(null,i));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var m=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var i=a("1356"),s=a.n(i);s.a},1:function(t,e){},1356:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),s=a("bb71"),r=a("c0a4"),o=a.n(r),n=(a("da64"),a("18f2")),l=a.n(n);i["a"].use(s["a"],{iconfont:"md",lang:{locales:{fr:l.a},current:"fr"},theme:{primary:o.a.purple.darken4,secondary:o.a.purple.lighten3}});var c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-snackbar",{attrs:{bottom:"",color:"error"},model:{value:t.showErrorMsg,callback:function(e){t.showErrorMsg=e},expression:"showErrorMsg"}},[t._v("\n    "+t._s(t.errorMsg)+"\n  ")]),t.user?a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("v-list",t._l(t.menuItems,function(e){return a("v-list-tile",{key:e.id,attrs:{to:e.routerLink}},[a("v-list-tile-action",[a("v-icon",[t._v(t._s(e.icon))])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.title))])],1)],1)}),1)],1):t._e(),t.user?a("v-toolbar",{attrs:{color:"primary",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),a("v-toolbar-title",[t._v("\n      PreLoRU\n      "),a("span",{staticClass:"body-1"},[t._v(t._s(t.user?t.user.Name:"")+" "+t._s(t.isAdmin?"[adm]":""))])]),a("v-spacer"),a("v-toolbar-items",[t.user?a("v-btn",{attrs:{flat:""},on:{click:t.onLogout}},[t._v("Déconnexion")]):t._e()],1)],1):t._e(),a("v-content",[a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{"align-center":"",wrap:""}},[t.loading?a("v-flex",{attrs:{xs12:""}},[a("v-progress-circular",{staticClass:"primary--text",attrs:{indeterminate:""}})],1):t._e(),null!==t.user?a("v-flex",{attrs:{xs12:""}},[a("router-view")],1):t._e(),a("v-dialog",{attrs:{width:"500",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"title primary white--text"},[t._v("PreLoRU - Connexion")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Email",required:"",rules:[t.notEmpty]},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Mot de passe","append-icon":t.pwdShow?"visibility":"visibility_off",type:t.pwdShow?"text":"password",required:"",rules:[t.notEmpty]},on:{"click:append":function(e){t.pwdShow=!t.pwdShow},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onConnectDlg(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:"",disabled:t.disabled},on:{click:t.onConnectDlg}},[t._v("Connexion")])],1)],1)],1)],1)],1)],1)],1)},m=[];const d="SET_ERROR_MESSAGE",u="BEGIN_LOADING",p="END_LOADING",h="SET_TOKEN",v="DEL_TOKEN",f="REFRESH_TOKEN",g="RETRIEVE_TOKEN",C=["Token invalide","token manquant","token expire","Token expiré"],y="LOG_IN",x="LOG_OUT",b="GET_USERS",_="UPDATE_USER",D="DEL_USER",I="CREATE_USER",w="GET_HOUSINGS",k="GET_PAGINATED_HOUSINGS",N="CREATE_HOUSING",S="UPDATE_HOUSING",P="DEL_HOUSING",V="UPLOAD_HOUSINGS",R="UPLOAD_HOUSING_COMMITMENT_LINK",T="GET_HOUSING_FORECASTS",A="CREATE_HOUSING_FORECAST",E="UPDATE_HOUSING_FORECAST",L="DELETE_HOUSING_FORECAST",$="GET_COPROS",B="CREATE_COPRO",O="UPDATE_COPRO",F="DEL_COPRO",M="UPLOAD_COPROS",j="UPLOAD_COPRO_COMMITMENT_LINK",U="GET_COPRO_DATAS",Y="GET_COPRO_FORECASTS",H="CREATE_COPRO_FORECAST",G="UPDATE_COPRO_FORECAST",Z="DELETE_COPRO_FORECAST",Q="GET_RENEW_PROJECTS",q="CREATE_RENEW_PROJECT",J="UPDATE_RENEW_PROJECT",W="DEL_RENEW_PROJECT",K="UPLOAD_RENEW_PROJECTS",z="GET_RENEW_PROJECT_DATAS",X="GET_RENEW_PROJECT_FORECASTS",tt="CREATE_RENEW_PROJECT_FORECAST",et="UPDATE_RENEW_PROJECT_FORECAST",at="DELETE_RENEW_PROJECT_FORECAST",it="GET_SETTINGS",st="GET_SECTORS",rt="CREATE_SECTOR",ot="UPDATE_SECTOR",nt="DEL_SECTOR",lt="GET_ACTIONS",ct="CREATE_ACTION",mt="UPDATE_ACTION",dt="DEL_ACTION",ut="GET_COMMISSIONS",pt="CREATE_COMMISSION",ht="UPDATE_COMMISSION",vt="DEL_COMMISSION",ft="GET_CITIES",gt="GET_PAGINATED_CITIES",Ct="CREATE_CITY",yt="UPDATE_CITY",xt="DEL_CITY",bt="UPLOAD_CITIES",_t="GET_COMMUNITIES",Dt="CREATE_COMMUNITY",It="UPDATE_COMMUNITY",wt="DEL_COMMUNITY",kt="UPLOAD_COMMUNITIES",Nt="GET_COMMITMENTS",St="UPLOAD_COMMITMENTS",Pt="EXPORT_COMMITMENTS",Vt="UNLINK_COMMITMENTS",Rt="GET_UNLINKED_COMMITMENTS",Tt="LINK_COMMITMENTS",At="GET_PAYMENTS",Et="UPLOAD_PAYMENTS",Lt="EXPORT_PAYMENTS",$t="GET_BENEFICIARIES",Bt="GET_BENEFICIARY_DATAS",Ot="GET_HOME_DATAS",Ft="GET_YEAR_RATIOS",Mt="SAVE_YEAR_RATIOS",jt="GET_RATIOS_YEARS",Ut="GET_PMT_FORECASTS";var Yt={name:"App",data:()=>({drawer:!1,showErrorMsg:!1,email:"",password:"",dialog:!0,pwdShow:!1}),computed:{user(){return this.$store.state.token.user},isAdmin(){return this.$store.getters.isAdmin},loading(){return this.$store.getters.loading},menuItems(){return this.$store.getters.menuItems},errorMsg(){return this.$store.state.loading.errorMsg},disabled(){return""===this.email||""===this.password}},created(){this.$store.commit(g)},methods:{async onConnectDlg(){this.disabled||await this.$store.dispatch(y,{email:this.email,password:this.password})},onLogout(){this.$store.dispatch(x),this.email="",this.password=""},notEmpty(t){return t.length>0||"À remplir"}},watch:{errorMsg(t){t&&(this.showErrorMsg=!0)},user(){this.dialog=null===this.user}}},Ht=Yt,Gt=(a("034f"),a("2877")),Zt=a("6544"),Qt=a.n(Zt),qt=a("7496"),Jt=a("8336"),Wt=a("b0af"),Kt=a("99d9"),zt=a("12b2"),Xt=a("a523"),te=a("549c"),ee=a("169a"),ae=a("ce7e"),ie=a("0e8f"),se=a("132d"),re=a("a722"),oe=a("8860"),ne=a("ba95"),le=a("40fe"),ce=a("5d23"),me=a("f774"),de=a("490a"),ue=a("2db4"),pe=a("9910"),he=a("2677"),ve=a("71d9"),fe=a("2a7f"),ge=a("706c"),Ce=Object(Gt["a"])(Ht,c,m,!1,null,null,null),ye=Ce.exports;Qt()(Ce,{VApp:qt["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VContent:te["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VList:oe["a"],VListTile:ne["a"],VListTileAction:le["a"],VListTileContent:ce["a"],VListTileTitle:ce["b"],VNavigationDrawer:me["a"],VProgressCircular:de["a"],VSnackbar:ue["a"],VSpacer:pe["a"],VTextField:he["a"],VToolbar:ve["a"],VToolbarItems:fe["a"],VToolbarSideIcon:ge["a"],VToolbarTitle:fe["b"]});var xe=a("8c4f"),be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("\n    Utilisateurs\n  ")]),a("v-card-text",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:"true",search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n            "+t._s(e.item.isActive?"check_box":"check_box_outline_blank")+"\n          ")])],1),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n            "+t._s(e.item.isAdmin?"check_box":"check_box_outline_blank")+"\n          ")])],1),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n            "+t._s(e.item.isCopro?"check_box":"check_box_outline_blank")+"\n          ")])],1),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n            "+t._s(e.item.isRenewProject?"check_box":"check_box_outline_blank")+"\n          ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.showModifyDlg(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n            Modifier\n          ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.showDelDlg(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n            Supprimer\n          ")])],1)]}}])})],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.showCreateDlg}},[t._v("\n      Nouvel utilisateur\n    ")])],1),a("v-dialog",{staticClass:"title primary white--text",attrs:{"max-width":"500px"},model:{value:t.usrDialog,callback:function(e){t.usrDialog=e},expression:"usrDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title primary white--text"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom",required:"",rules:[t.notEmpty]},model:{value:t.modifiedItem.Name,callback:function(e){t.$set(t.modifiedItem,"Name",e)},expression:"modifiedItem.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Email",required:"",rules:[t.notEmpty]},model:{value:t.modifiedItem.Email,callback:function(e){t.$set(t.modifiedItem,"Email",e)},expression:"modifiedItem.Email"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Mot de passe"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{"input-value":t.modifiedItem.isActive,label:"Actif",primary:"","hide-details":""},on:{change:function(e){return t.change(t.modifiedItem,"isActive")}}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{"input-value":t.modifiedItem.isAdmin,label:"Administrateur",primary:"","hide-details":""},on:{change:function(e){return t.change(t.modifiedItem,"isAdmin")}}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{"input-value":t.modifiedItem.isCopro,label:"Droits copro",primary:"","hide-details":""},on:{change:function(e){return t.change(t.modifiedItem,"isCopro")}}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{"input-value":t.modifiedItem.isRenewProject,label:"Droits (N)PNRU",primary:"","hide-details":""},on:{change:function(e){return t.change(t.modifiedItem,"isRenewProject")}}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.usrDialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",flat:"",disabled:t.disabled},on:{click:t.saveDlg}},[t._v("\n          "+t._s(t.saveBtnTxt)+"\n        ")])],1)],1)],1),a("v-dialog",{staticClass:"title primary white--text",attrs:{"max-width":"500px"},model:{value:t.delDialog,callback:function(e){t.delDialog=e},expression:"delDialog"}},[a("v-card",[a("v-card-title",{staticClass:"title primary white--text"},[t._v("\n        Suppression d'utilisateur\n      ")]),a("v-card-text",[t._v("\n        Supprimer définitivement l'utilisateur "+t._s(this.modifiedItem.Name)+" ?\n      ")]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:function(e){t.delDialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.delDlg}},[t._v("\n          Supprimer\n        ")])],1)],1)],1)],1)},_e=[],De={name:"Users",data(){return{search:"",headers:[{text:"Nom",value:"Name"},{text:"Actif",value:"isActive"},{text:"Admin",value:"isAdmin"},{text:"Copro",value:"isCopro"},{text:"RU",value:"isRenewProject"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],items:[],usrDialog:!1,delDialog:!1,modifiedItem:{},password:"",disabled:!1,saveBtnTxt:"",dlgTitle:""}},computed:{usersList(){return this.$store.state.users.usersList}},methods:{change(t,e){t.Updated=!0,t[e]=!t[e],this.modified=!0},showModifyDlg(t){this.modifiedItem={...t},this.usrDialog=!0,this.dlgTitle="Modification d'utilisateur",this.saveBtnTxt="Modifier"},showCreateDlg(t){this.modifiedItem={Name:"",Email:"",isActive:!1,isAdmin:!1,isCopro:!1,isRenewProject:!1},this.usrDialog=!0,this.dlgTitle="Création d'utilisateur",this.saveBtnTxt="Créer"},showDelDlg(t){this.modifiedItem={...t},this.delDialog=!0},notEmpty(t){return t&&t.length>0||"À remplir"},async saveDlg(){if(!this.disabled){this.modifiedItem.Rights=(this.modifiedItem.isActive?1:0)+(this.modifiedItem.isAdmin?4:0)+(this.modifiedItem.isCopro?8:0)+(this.modifiedItem.isRenewProject?16:0),this.modifiedItem.Password=this.password;let t="Modifier"===this.saveBtnTxt?_:I;await this.$store.dispatch(t,this.modifiedItem),this.usrDialog=!1,this.password=""}},async delDlg(){await this.$store.dispatch(D,this.modifiedItem.ID),this.delDialog=!1}},watch:{usersList(t){this.items=t.map((t,e)=>({ID:t.ID,Name:t.Name,Email:t.Email,Updated:!1,isActive:1&t.Rights,isAdmin:4&t.Rights,isCopro:8&t.Rights,isRenewProject:16&t.Rights})),this.modified=!1}},mounted(){this.$store.dispatch(b)}},Ie=De,we=a("ac7c"),ke=a("8fea"),Ne=a("3a2f"),Se=Object(Gt["a"])(Ie,be,_e,!1,null,null,null),Pe=Se.exports;Qt()(Se,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VCheckbox:we["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Logement social")]),a("v-tabs",{attrs:{color:"secondary","slider-color":"primary"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Opérations")]),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (référence, adresse, code INSEE)"},model:{value:t.opSearch,callback:function(e){t.opSearch=e},expression:"opSearch"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left table-link",on:{click:function(a){return t.goTo(e.item)}}},[t._v("\n                "+t._s(e.item.Reference)+"\n              ")]),a("td",{staticClass:"text-xs-left table-link",on:{click:function(a){return t.goTo(e.item)}}},[t._v("\n                "+t._s(e.item.Address)+"\n              ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Housings))]),a("td",[a("v-icon",[t._v(t._s(e.item.ANRU?"done":"clear"))])],1),a("td",{staticClass:"pr-0 pl-0"},[t.hasHousingRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",{staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.modify(e.item)}}},[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("create")])],1)]}}],null,!0)},[a("span",[t._v("Modifier")])]):t._e()],1),a("td",{staticClass:"pr-0 pl-0"},[t.hasHousingRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("delete")])],1)]}}],null,!0)},[a("span",[t._v("Supprimer")])]):t._e()],1)]}}])}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getHousings},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1),t.hasHousingRight?a("v-flex",{attrs:{xs12:""}},[a("upload-button",{attrs:{name:"Import lien engagements"},on:{fileChosen:function(e){return t.commitentLinkUpload(e)}}}),a("upload-button",{attrs:{name:"Import opérations"},on:{fileChosen:function(e){return t.operationUpload(e)}}}),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1):t._e()],1)],1),a("v-tab",[t._v("Prévisions")]),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher (référence, adresse, code INSEE)"},model:{value:t.forecastSearch,callback:function(e){t.forecastSearch=e},expression:"forecastSearch"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.forecastHeaders,items:t.housingForecasts,"item-key":"ID",loading:t.loading,search:t.forecastSearch},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v("\n                "+t._s(t._f("date")(e.item.CommissionDate))+"\n              ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.CommissionName))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.ActionName))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"pr-0 pl-0"},[t.hasHousingRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",{staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.forecastModify(e.item)}}},[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("create")])],1)]}}],null,!0)},[a("span",[t._v("Modifier")])]):t._e()],1),a("td",{staticClass:"pr-0 pl-0"},[t.hasHousingRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.forecastRemove(e.item)}}},s),[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("delete")])],1)]}}],null,!0)},[a("span",[t._v("Supprimer")])]):t._e()],1)]}}])})],1),t.hasHousingRight?a("v-flex",{attrs:{xs12:""}},[a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.forecastAdd}},[t._v("Créer")])],1):t._e()],1)],1)],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v(t._s(t.dlgTitle))]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Référence"},model:{value:t.item.Reference,callback:function(e){t.$set(t.item,"Reference",e)},expression:"item.Reference"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.cities,"item-text":"Name","item-value":"InseeCode",label:"Commune"},model:{value:t.item.ZipCode,callback:function(e){t.$set(t.item,"ZipCode",e)},expression:"item.ZipCode"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Adresse"},model:{value:t.item.Address,callback:function(e){t.$set(t.item,"Address",e)},expression:"item.Address"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"PLAI"},model:{value:t.item.PLAI,callback:function(e){t.$set(t.item,"PLAI",e)},expression:"item.PLAI"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"PLUS"},model:{value:t.item.PLUS,callback:function(e){t.$set(t.item,"PLUS",e)},expression:"item.PLUS"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"PLS"},model:{value:t.item.PLS,callback:function(e){t.$set(t.item,"PLS",e)},expression:"item.PLS"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{label:"ANRU"},model:{value:t.item.ANRU,callback:function(e){t.$set(t.item,"ANRU",e)},expression:"item.ANRU"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.forecastDialog,callback:function(e){t.forecastDialog=e},expression:"forecastDialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v(t._s(t.forecastDlgTitle))]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.commissions,"item-text":"Name","item-value":"ID",label:"Commission"},model:{value:t.forecastItem.CommissionID,callback:function(e){t.$set(t.forecastItem,"CommissionID",e)},expression:"forecastItem.CommissionID"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.budgetActions,"item-text":"Name","item-value":"ID",label:"Action budgétaire"},model:{value:t.forecastItem.ActionID,callback:function(e){t.$set(t.forecastItem,"ActionID",e)},expression:"forecastItem.ActionID"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Montant"},model:{value:t.forecastItem.Value,callback:function(e){t.$set(t.forecastItem,"Value",e)},expression:"forecastItem.Value"}})],1),a("v-flex",{attrs:{xs12:""}},[t._v(t._s(t.formattedForecastValue))]),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Commentaire"},model:{value:t.forecastItem.Comment,callback:function(e){t.$set(t.forecastItem,"Comment",e)},expression:"forecastItem.Comment"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.forecastDialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.forecastDisabled},on:{click:t.forecastSave}},[t._v(t._s(t.forecastDlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer le logement définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}}),a("delete-dialog",{attrs:{sentence:"Supprimer la prévision définitivement ?"},on:{confirm:t.forecastDelConfirm},model:{value:t.forecastDelDlg,callback:function(e){t.forecastDelDlg=e},expression:"forecastDelDlg"}})],1)},Re=[],Te=a("e814"),Ae=a.n(Te);const Ee=new Intl.DateTimeFormat("fr-FR",{day:"2-digit",month:"2-digit",year:"numeric"}),Le=new Intl.NumberFormat("fr-FR",{maximumFractionDigits:2}),$e=new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}),Be=new Intl.NumberFormat("fr-FR",{style:"percent",minimumFractionDigits:2,maximumFractionDigit:2}),Oe=new Intl.NumberFormat("fr-FR");function Fe(t){return t?"Oui":"Non"}function Me(t){return t||"-"}function je(t){return t?Ee.format(new Date(t)):"-"}function Ue(t){return null!==t?$e.format(t/100):"-"}function Ye(t){return t?Le.format(t/100):"-"}function He(t){return Be.format(t)}function Ge(t){return t?Oe.format(t):"-"}var Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.pickFile}},[t._v(t._s(t.name))]),a("input",{ref:"image",staticStyle:{display:"none"},attrs:{type:"file",accept:".xlsx"},on:{change:t.onFilePicked}})],1)},Qe=[],qe={name:"UploadButton",props:{name:{type:String,default:"Télécharger"}},methods:{pickFile(){this.$refs.image.click()},onFilePicked(t){const e=t.target.files;void 0!==e[0]&&this.$emit("fileChosen",e[0])}}},Je=qe,We=Object(Gt["a"])(Je,Ze,Qe,!1,null,null,null),Ke=We.exports;Qt()(We,{VBtn:Jt["a"]});var ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{value:t.value,persistent:"","max-width":"500px"},on:{input:function(e){return t.$emit("input",e.target.value)}}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("Confirmer la suppression")]),a("v-card-text",[t._v(t._s(t.sentence))]),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){return t.$emit("input",!1)}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){return t.$emit("confirm")}}},[t._v("Supprimer")])],1)],1)],1)},Xe=[],ta={name:"DeleteDialog",props:{sentence:{type:String,required:!0},value:{type:Boolean,required:!0}}},ea=ta,aa=Object(Gt["a"])(ea,ze,Xe,!1,null,null,null),ia=aa.exports;Qt()(aa,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VDialog:ee["a"],VDivider:ae["a"],VSpacer:pe["a"]});const sa=t=>/^\d+([,.]\d{1,2})?$/.test(t);var ra={name:"Housings",components:{UploadButton:Ke,DeleteDialog:ia},data(){return{opSearch:"",forecastSearch:"",headers:[{text:"Référence",value:"Reference",sortable:!1},{text:"Adresse",value:"Address",sortable:!1},{text:"Logements",value:"Housings",sortable:!1},{text:"ANRU",value:"ANRU",sortable:!1},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],forecastHeaders:[{text:"Date",value:"CommissionDate"},{text:"Commission",value:"CommissionName"},{text:"Action",value:"ActionName"},{text:"Montant",value:"Value"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],pagination:{},dialog:!1,item:{Reference:"",ZipCode:null,PLAI:0,PLUS:0,PLS:0,ANRU:!1},forecastItem:{ID:null,CommissionID:null,CommissionDate:null,CommissionName:"",Value:0,Comment:null,ActionID:null,ActionName:""},dlgTitle:"Créer un logement",dlgBtn:"Créer",delDlg:!1,forecastDialog:!1,forecastDlgTitle:"Créer une prévision",forecastDlgBtn:"Créer",forecastDelDlg:!1,active:null}},computed:{housings(){return this.$store.state.housings.housingsList},items(){return this.housings.map(t=>({ID:t.ID,Reference:t.Reference,Address:"["+Me(t.CityName)+"] "+Me(t.Address),Housings:"PLAI : "+t.PLAI+", PLUS : "+t.PLUS+", PLS : "+t.PLS,ANRU:t.ANRU}))},loading(){return 0!==this.$store.state.loading.loading},disabled(){return""===this.item.Reference},forecastDisabled(){return null===this.forecastItem.CommissionID||null===this.forecastItem.ActionID||!sa(this.forecastItem.Value)},formattedForecastValue(){return Ue(Ae()(100*String(this.forecastItem.Value).replace(",",".")))},itemsCount(){return this.$store.state.housings.housingsItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)},hasHousingRight(){return this.$store.getters.hasHousingRight},cities(){return this.$store.state.cities.citiesList},commissions(){return this.$store.state.settings.commissionsList},budgetActions(){return this.$store.state.settings.budgetActionsList},housingForecasts(){return this.$store.state.housings.housingForecastsList}},methods:{newSearch(t){this.opSearch=t,this.getHousings()},add(){this.item={ID:null,Reference:"",Address:"",ZipCode:null,PLAI:0,PLUS:0,PLS:0,ANRU:!1},this.dlgTitle="Créer un logement",this.dlgBtn="Créer",this.dialog=!0},modify(t){let e=this.housings.find(e=>e.ID===t.ID);this.item={ID:e.ID,Reference:e.Reference,Address:e.Address,ZipCode:e.ZipCode,PLAI:e.PLAI,PLUS:e.PLUS,PLS:e.PLS,ANRU:e.ANRU},this.dlgTitle="Modifier un logement",this.dlgBtn="Modifier",this.dialog=!0},remove(t){this.item.ID=t.ID,this.delDlg=!0},forecastAdd(){this.forecastItem={ID:null,CommissionID:null,CommissionDate:null,CommissionName:"",Value:0,Comment:null,ActionID:null,ActionName:""},this.forecastDlgTitle="Créer une prévision",this.forecastDlgBtn="Créer",this.forecastDialog=!0},forecastModify(t){let e=this.housingForecasts.find(e=>e.ID===t.ID);this.forecastItem={...e},this.forecastItem.Value=e.Value/100,this.forecastDlgTitle="Modifier une précision",this.forecastDlgBtn="Modifier",this.forecastDialog=!0},forecastRemove(t){this.forecastItem={...t},this.forecastDelDlg=!0},operationUpload(t){this.$store.dispatch(V,t)},commitentLinkUpload(t){this.$store.dispatch(R,t)},async delConfirm(){await this.$store.dispatch(P,this.item.ID),this.delDlg=!1},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?N:S;this.$store.dispatch(t,{ID:this.item.ID,Reference:this.item.Reference,ZipCode:this.item.ZipCode?Number(this.item.ZipCode):null,Address:this.item.Address,ANRU:this.item.ANRU,PLAI:Number(this.item.PLAI),PLUS:Number(this.item.PLUS),PLS:Number(this.item.PLS)}),this.dialog=!1}},async getHousings(t=!1){await this.$store.dispatch(k,{Search:this.opSearch,Page:this.pagination.page||0,Lists:t})},goTo({ID:t}){this.$router.push({name:"Housing",params:{ID:t}})},async forecastDelConfirm(){await this.$store.dispatch(L,this.forecastItem),this.forecastDelDlg=!1},async forecastSave(){if(!this.forecastDisabled){let t="Créer"===this.forecastDlgBtn?A:E,e=null;if(this.forecastItem.Date){let t=new Date(this.forecastItem.Date);e=t.toISOString()}this.$store.dispatch(t,{ID:Ae()(this.forecastItem.ID),CommissionID:this.forecastItem.CommissionID,CommissionDate:e,CommissionName:this.forecastItem.CommissionName,Value:Ae()(100*String(this.forecastItem.Value).replace(",",".")),Comment:this.forecastItem.Comment,ActionID:Ae()(this.forecastItem.ActionID),ActionName:this.forecastItem.ActionName}),this.forecastDialog=!1}}},created(){this.getHousings(!0)}},oa=ra,na=a("c6a6"),la=a("891e"),ca=a("71a3"),ma=a("c671"),da=a("fe57"),ua=a("a844"),pa=Object(Gt["a"])(oa,Ve,Re,!1,null,null,null),ha=pa.exports;Qt()(pa,{VAutocomplete:na["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VCheckbox:we["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VPagination:la["a"],VSpacer:pe["a"],VTab:ca["a"],VTabItem:ma["a"],VTabs:da["a"],VTextField:he["a"],VTextarea:ua["a"],VTooltip:Ne["a"]});var va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Copropriétés")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.copros,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left table-link",on:{click:function(a){return t.goTo(e.item.ID)}}},[t._v("\n              "+t._s(e.item.Reference)+"\n            ")]),a("td",{staticClass:"text-xs-left table-link",on:{click:function(a){return t.goTo(e.item.ID)}}},[t._v("\n              "+t._s(e.item.Name)+"\n            ")]),a("td",[t._v(t._s(e.item.Address))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("date")(e.item.LabelDate)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Budget)))]),a("td",{staticClass:"pr-0 pl-0"},[t.hasCoproRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",{staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.modify(e.item)}}},[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("create")])],1)]}}],null,!0)},[a("span",[t._v("Modifier")])]):t._e()],1),a("td",{staticClass:"pr-0 pl-0"},[t.hasCoproRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",icon:"",small:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",t._g({staticClass:"pa-0"},s),[t._v("delete")])],1)]}}],null,!0)},[a("span",[t._v("Supprimer")])]):t._e()],1)]}}])})],1)],1)],1),a("v-divider"),t.hasCoproRight?a("v-card-actions",[a("v-spacer"),a("upload-button",{attrs:{name:"Import lien engagements"},on:{fileChosen:function(e){return t.commitentLinkUpload(e)}}}),a("upload-button",{attrs:{name:"Import opérations"},on:{fileChosen:function(e){return t.operationUpload(e)}}}),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1):t._e(),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Référence"},model:{value:t.item.Reference,callback:function(e){t.$set(t.item,"Reference",e)},expression:"item.Reference"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Nom"},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Adresse"},model:{value:t.item.Address,callback:function(e){t.$set(t.item,"Address",e)},expression:"item.Address"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Code INSEE"},model:{value:t.item.ZipCode,callback:function(e){t.$set(t.item,"ZipCode",e)},expression:"item.ZipCode"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.item.LabelDate,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.item,"LabelDate",e)},"update:return-value":function(e){return t.$set(t.item,"LabelDate",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g({attrs:{label:"Date du label","prepend-icon":"event",readonly:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:t.item.LabelDate,callback:function(e){t.$set(t.item,"LabelDate",e)},expression:"item.LabelDate"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.item.LabelDate)}}},[t._v("OK")])],1)],1)],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Budget"},model:{value:t.item.Budget,callback:function(e){t.$set(t.item,"Budget",e)},expression:"item.Budget"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer la copropriété définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},fa=[];function ga(t){if(!t)return null;const[e,a,i]=t.substring(0,10).split("-");return`${i}/${a}/${e}`}var Ca={name:"Copros",components:{UploadButton:Ke,DeleteDialog:ia},data(){return{search:"",headers:[{text:"Référence",align:"center",value:"Reference"},{text:"Nom",align:"center",value:"Name"},{text:"Adresse",align:"center",value:"Address"},{text:"Date label",align:"center",value:"LabelDate"},{text:"Budget",align:"center",value:"Budget"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,item:{ID:null,Reference:"",Name:"",Address:"",ZipCode:0,LabelDate:null,Budget:null},dlgTitle:"Créer une copropriété",dlgBtn:"Créer",delDlg:!1,menu:!1}},computed:{copros(){return this.$store.state.copros.coprosList.map(t=>({ID:t.ID,Address:"["+t.CityName+"] "+t.Address,Budget:t.Budget,LabelDate:t.LabelDate,Name:t.Name,Reference:t.Reference,ZipCode:t.ZipCode}))},loading(){return 0!==this.$store.state.loading.loading},disabled(){return""===this.item.Reference||""===this.item.Name||""===this.item.Address||0===this.item.ZipCode||this.item.Budget&&!/^\d+[,.]?\d{0,2}$/.test(this.item.Budget)},formattedDate(){return ga(this.item.LabelDate)},hasCoproRight(){return this.$store.getters.hasCoproRight}},methods:{add(){this.item={ID:null,Reference:"",Name:"",Address:"",ZipCode:0,LabelDate:null,Budget:null},this.dlgTitle="Créer une copropriété",this.dlgBtn="Créer",this.dialog=!0},modify(t){let e=this.copros.find(e=>e.ID===t.ID);this.item={ID:e.ID,Reference:e.Reference,Name:e.Name,Address:e.Address,ZipCode:e.ZipCode,LabelDate:e.LabelDate,Budget:e.Budget?e.Budget/100:null},this.dlgTitle="Modifier une copropriété",this.dlgBtn="Modifier",this.dialog=!0},remove(t){this.item.ID=t.ID,this.delDlg=!0},async delConfirm(){await this.$store.dispatch(F,this.item.ID),this.delDlg=!1},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?B:O,e=null;if(this.item.LabelDate){let t=new Date(this.item.LabelDate);e=t.toISOString()}this.$store.dispatch(t,{ID:this.item.ID,Reference:this.item.Reference,Name:this.item.Name,ZipCode:Ae()(this.item.ZipCode),Address:this.item.Address,LabelDate:e,Budget:this.item.Budget?100*Ae()(String(this.item.Budget).replace(",",".")):null}),this.dialog=!1}},operationUpload(t){this.$store.dispatch(M,t)},commitentLinkUpload(t){this.$store.dispatch(j,t)},goTo(t){this.$router.push({name:"Copro",params:{ID:t}})}},created(){this.$store.dispatch($)}},ya=Ca,xa=a("2e4b"),ba=a("e449"),_a=Object(Gt["a"])(ya,va,fa,!1,null,null,null),Da=_a.exports;Qt()(_a,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDatePicker:xa["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VMenu:ba["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Projets de renouvellement urbain")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left table-link",on:{click:function(a){return t.selectItem(e.item.ID)}}},[t._v("\n              "+t._s(e.item.Reference)+"\n            ")]),a("td",[a("v-icon",[t._v("\n                "+t._s(e.item.PRIN?"check_box":"check_box_outline_blank")+"\n              ")])],1),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Cities))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Budget)))]),a("td",{staticClass:"text-xs-right"},[t._v("\n              "+t._s(t._f("number")(e.item.Population))+"\n            ")]),a("td",{staticClass:"text-xs-right"},[t._v("\n              "+t._s(t._f("nullable")(e.item.CompositeIndex))+"\n            ")]),a("td",{staticClass:"pr-0 pl-0"},[t.hasRenewProjectRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n                Modifier\n              ")]):t._e()],1),a("td",{staticClass:"pr-0 pl-0"},[t.hasRenewProjectRight?a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n                Supprimer\n              ")]):t._e()],1)]}}])})],1)],1)],1),a("v-divider"),t.hasRenewProjectRight?a("v-card-actions",[a("v-spacer"),a("upload-button",{on:{fileChosen:function(e){return t.upload(e)}}}),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1):t._e(),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Référence",rules:[t.refRule]},model:{value:t.item.Reference,callback:function(e){t.$set(t.item,"Reference",e)},expression:"item.Reference"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-checkbox",{attrs:{label:"PRIN"},model:{value:t.item.PRIN,callback:function(e){t.$set(t.item,"PRIN",e)},expression:"item.PRIN"}})],1),a("v-flex",[a("v-autocomplete",{attrs:{items:t.cityItems,loading:t.loading,"hide-no-data":"","hide-selected":"","item-text":"Name","item-value":"InseeCode",label:"Première ville",required:"",rules:[t.notNull]},model:{value:t.item.CityCode1,callback:function(e){t.$set(t.item,"CityCode1",e)},expression:"item.CityCode1"}})],1),a("v-flex",[a("v-autocomplete",{attrs:{items:t.cityItems,loading:t.loading,"hide-no-data":"","hide-selected":"","item-text":"Name","item-value":"InseeCode",label:"Deuxième ville"},model:{value:t.item.CityCode2,callback:function(e){t.$set(t.item,"CityCode2",e)},expression:"item.CityCode2"}})],1),a("v-flex",[a("v-autocomplete",{attrs:{items:t.cityItems,loading:t.loading,"hide-no-data":"","hide-selected":"","item-text":"Name","item-value":"InseeCode",label:"Troisième ville"},model:{value:t.item.CityCode3,callback:function(e){t.$set(t.item,"CityCode3",e)},expression:"item.CityCode3"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Nom",rules:[t.notEmpty]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Budget"},model:{value:t.item.Budget,callback:function(e){t.$set(t.item,"Budget",e)},expression:"item.Budget"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Population"},model:{value:t.item.Population,callback:function(e){t.$set(t.item,"Population",e)},expression:"item.Population"}})],1),a("v-flex",{attrs:{xs6:""}},[a("v-text-field",{attrs:{label:"Indice composite"},model:{value:t.item.CompositeIndex,callback:function(e){t.$set(t.item,"CompositeIndex",e)},expression:"item.CompositeIndex"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer le projet définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},wa=[];const ka=t=>/^PR[RN](75|77|78|91|92|93|94|95)\d{2}$/.test(t);var Na={name:"RenewProjects",components:{UploadButton:Ke,DeleteDialog:ia},data(){return{search:"",headers:[{text:"Référence",value:"Reference"},{text:"PRIN",value:"PRIN"},{text:"Communes",value:"Cities"},{text:"Nom",value:"Name"},{text:"Budget",value:"Budget"},{text:"Population",value:"Population"},{text:"Cat.",value:"CompositeIndex"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,item:{ID:null,Reference:"",Name:"",PRIN:!1,CityCode1:null,CityCode2:null,CityCode3:null,Budget:null,Population:null,CompositeIndex:null},dlgTitle:"Créer un projet de renouvellement",dlgBtn:"Créer",delDlg:!1,menu:!1}},computed:{items(){return this.$store.state.renewProjects.renewProjectsList.map(t=>({ID:t.ID,PRIN:t.PRIN,Reference:t.Reference,Name:t.Name,Budget:t.Budget,CompositeIndex:t.CompositeIndex,CityCode1:t.CityCode1,CityCode2:t.CityCode2,CityCode3:t.CityCode3,Population:t.Population,Cities:t.CityName1+(t.CityName2?", "+t.CityName2:"")+(t.CityName3?", "+t.CityName3:"")}))},cityItems(){return[{Name:"<Aucun>",InseeCode:null},...this.$store.state.cities.citiesList]},loading(){return 0!==this.$store.state.loading.loading},disabled(){return!ka(this.item.Reference)||""===this.item.Name||null===this.item.CityCode1||this.item.Budget&&!/^\d+[,.]?\d{0,2}$/.test(this.item.Budget)||this.item.Population&&!/^\d+$/.test(this.item.Budget)||this.item.CompositeIndex&&!/^\d+[,.]?\d{0,2}$/.test(this.item.CompositeIndex)},hasRenewProjectRight(){return this.$store.getters.hasRenewProjectRight}},methods:{add(){this.item={ID:null,Reference:"",Name:"",PRIN:!1,CityCode1:null,CityCode2:null,CityCode3:null,Budget:null,Population:null,CompositeIndex:null},this.dlgTitle="Créer un projet de renouvellement",this.dlgBtn="Créer",this.dialog=!0},modify(t){let e=this.items.find(e=>e.ID===t.ID);this.item={ID:e.ID,Reference:e.Reference,Name:e.Name,PRIN:e.PRIN,CityCode1:e.CityCode1,CityCode2:e.CityCode2,CityCode3:e.CityCode3,Budget:e.Budget/100,Population:e.Population,CompositeIndex:e.CompositeIndex},this.dlgTitle="Modifier un projet de renouvellement",this.dlgBtn="Modifier",this.dialog=!0},remove(t){this.item.ID=t.ID,this.delDlg=!0},refRule(t){return ka(t)||"La référence doit être du type PRN9304"},notEmpty(t){return t.length>0||"Le nom doit être renseigné"},notNull(t){return null!==t||"Une ville doit être choisie"},selectItem(t){this.$router.push({name:"RenewProject",params:{ID:t}})},async delConfirm(){await this.$store.dispatch(W,this.item.ID),this.delDlg=!1},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?q:J;this.$store.dispatch(t,{ID:this.item.ID,Reference:this.item.Reference,Name:this.item.Name,PRIN:this.item.PRIN,CityCode1:this.item.CityCode1,CityCode2:this.item.CityCode2,CityCode3:this.item.CityCode3,Budget:this.item.Budget?100*Ae()(String(this.item.Budget).replace(",",".")):null,Population:this.item.Population?Ae()(this.item.Population):null,CompositeIndex:this.item.CompositeIndex?Ae()(String(this.item.CompositeIndex).replace(",",".")):null}),this.dialog=!1}},upload(t){this.$store.dispatch(K,t)}},created(){this.$store.dispatch(Q)}},Sa=Na,Pa=Object(Gt["a"])(Sa,Ia,wa,!1,null,null,null),Va=Pa.exports;Qt()(Pa,{VAutocomplete:na["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VCheckbox:we["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Administration")]),a("v-tabs",{attrs:{"slider-color":"primary"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Secteurs")]),a("v-tab-item",[a("BudgetSector")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Actions")]),a("v-tab-item",[a("BudgetAction")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Commissions")]),a("v-tab-item",[a("Commission")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Intercos")]),a("v-tab-item",[a("Communities")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Communes")]),a("v-tab-item",[a("Cities")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Engagements")]),a("v-tab-item",[a("Commitments")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Paiements")]),a("v-tab-item",[a("Payments")],1)],1)],1)},Ta=[],Aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.FullName))]),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n              Modifier\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n              Supprimer\n            ")])],1)]}}])})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Code secteur"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom complet"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.FullName,callback:function(e){t.$set(t.item,"FullName",e)},expression:"item.FullName"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Annuler\n        ")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v("\n          "+t._s(t.dlgBtn)+"\n        ")])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer le secteur budgétaire définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},Ea=[],La={name:"BudgetSector",components:{DeleteDialog:ia},data(){return{search:"",headers:[{text:"Code",value:"Name"},{text:"Nom complet",value:"FullName"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,delDlg:!1,item:{Name:"",FullName:null},dlgTitle:"Nouveau secteur budgétaire",dlgBtn:"Créer"}},methods:{remove(t){this.item.ID=t.ID},modify(t){this.item.ID=t.ID,this.item.Name=t.Name,this.item.FullName=t.FullName,this.dlgTitle="Modifier le secteur budgétaire",this.dlgBtn="Modifier",this.dialog=!0},add(t){this.item.ID=null,this.item.Name="",this.item.FullName=null,this.dlgTitle="Créer un secteur budgétaire",this.dlgBtn="Créer",this.dialog=!0},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?rt:ot;await this.$store.dispatch(t,this.item),this.dialog=!1}},async delConfirm(){await this.$store.dispatch(nt,this.item.ID),this.delDlg=!1}},computed:{items(){return this.$store.state.settings.budgetSectorsList},loading(){return 0!==this.$store.state.loading.loading},disabled(){return""===this.item.Name}}},$a=La,Ba=Object(Gt["a"])($a,Aa,Ea,!1,null,null,null),Oa=Ba.exports;Qt()(Ba,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Code))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Sector))]),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n              Modifier\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n              Supprimer\n            ")])],1)]}}])})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Code de l'action budgétaire"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Code,callback:function(e){t.$set(t.item,"Code",e)},expression:"item.Code"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom complet"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-select",{attrs:{items:t.budgetSectors,"item-text":"Name","item-value":"ID",label:"Secteur budgétaire"},model:{value:t.item.SectorID,callback:function(e){t.$set(t.item,"SectorID",e)},expression:"item.SectorID"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Annuler\n        ")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v("\n          "+t._s(t.dlgBtn)+"\n        ")])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer l'action budgétaire définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},Ma=[],ja={name:"BudgetAction",components:{DeleteDialog:ia},data(){return{search:"",headers:[{text:"Code",value:"Name"},{text:"Nom complet",value:"FullName"},{text:"Secteur",value:"Sector"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,delDlg:!1,item:{Code:"",Name:null,SectorID:null},dlgTitle:"Nouvelle action budgétaire",dlgBtn:"Créer"}},methods:{remove(t){this.item.ID=t.ID,this.delDlg=!0},modify(t){this.item.ID=t.ID,this.item.Code=t.Code,this.item.Name=t.Name,this.item.SectorID=t.SectorID,this.dlgTitle="Modifier l'action budgétaire",this.dlgBtn="Modifier",this.dialog=!0},add(t){this.item.ID=null,this.item.Code="",this.item.Name=null,this.item.SectorID=null,this.dlgTitle="Nouvelle action budgétaire",this.dlgBtn="Créer",this.dialog=!0},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?ct:mt;await this.$store.dispatch(t,{ID:this.item.ID,Code:Number(this.item.Code),Name:this.item.Name,SectorID:this.item.SectorID}),this.dialog=!1}},async delConfirm(){await this.$store.dispatch(dt,this.item.ID),this.delDlg=!1}},computed:{items(){return this.$store.state.settings.budgetActionsList.map(t=>{let e=this.budgetSectors.find(e=>e.ID===t.SectorID);return{ID:t.ID,Code:t.Code,Name:t.Name,Sector:e.Name+" ("+Me(e.FullName)+")",SectorID:t.SectorID}})},budgetSectors(){return this.$store.state.settings.budgetSectorsList},loading(){return 0!==this.$store.state.loading.loading},disabled(){return null===this.item.Code||""===this.item.Code||!/^\d+$/.test(this.item.Code)||null===this.item.SectorID}}},Ua=ja,Ya=a("b56d"),Ha=Object(Gt["a"])(Ua,Fa,Ma,!1,null,null,null),Ga=Ha.exports;Qt()(Ha,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSelect:Ya["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var Za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.Date)))]),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n              Modifier\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n              Supprimer\n            ")])],1)]}}])})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"nudge-right":40,"return-value":t.item.Date,lazy:"",transition:"scale-transition","offset-y":"","full-width":"","min-width":"290px"},on:{"update:returnValue":function(e){return t.$set(t.item,"Date",e)},"update:return-value":function(e){return t.$set(t.item,"Date",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on;return[a("v-text-field",t._g({attrs:{label:"Date de la commission","prepend-icon":"event",readonly:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},i))]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",locale:"fr-FR"},model:{value:t.item.Date,callback:function(e){t.$set(t.item,"Date",e)},expression:"item.Date"}},[a("v-spacer"),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){t.menu=!1}}},[t._v("\n                    Annuler\n                  ")]),a("v-btn",{attrs:{flat:"",color:"primary"},on:{click:function(e){return t.$refs.menu.save(t.item.Date)}}},[t._v("\n                    OK\n                  ")])],1)],1)],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Annuler\n        ")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v("\n          "+t._s(t.dlgBtn)+"\n        ")])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer la commission définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},Qa=[],qa={name:"Commission",components:{DeleteDialog:ia},data(){return{search:"",headers:[{text:"Nom",value:"Name"},{text:"Date",value:"Date"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,delDlg:!1,item:{Name:"",Date:null},dlgTitle:"Nouvelle commission",dlgBtn:"Créer",menu:null}},methods:{remove(t){this.item.ID=t.ID,this.delDlg=!0},modify(t){this.item.ID=t.ID,this.item.Name=t.Name,this.item.Date=t.Date,this.dlgTitle="Modifier la commission",this.dlgBtn="Modifier",this.dialog=!0},add(t){this.item.ID=null,this.item.Name="",this.item.Date=null,this.dlgTitle="Nouvelle commission",this.dlgBtn="Créer",this.dialog=!0},async save(){if(!this.disabled){let t=null;if(this.item.Date){let e=new Date(this.item.Date);t=e.toISOString()}let e="Créer"===this.dlgBtn?pt:ht;await this.$store.dispatch(e,{ID:this.item.ID,Name:this.item.Name,Date:t}),this.dialog=!1}},async delConfirm(){await this.$store.dispatch(vt,this.item.ID),this.delDlg=!1}},computed:{items(){return this.$store.state.settings.commissionsList},loading(){return 0!==this.$store.state.loading.loading},disabled(){return null===this.item.Name||""===this.item.Name},formattedDate(){return ga(this.item.Date)}}},Ja=qa,Wa=Object(Gt["a"])(Ja,Za,Qa,!1,null,null,null),Ka=Wa.exports;Qt()(Wa,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDatePicker:xa["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VMenu:ba["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var za=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","offset-md3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,search:t.search},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Code))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n              Modifier\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n              Supprimer\n            ")])],1)]}}])})],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("upload-button",{on:{fileChosen:function(e){return t.upload(e)}}}),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Code (INSEE)"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Code,callback:function(e){t.$set(t.item,"Code",e)},expression:"item.Code"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("\n          Annuler\n        ")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v("\n          "+t._s(t.dlgBtn)+"\n        ")])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer l'intercommunalité définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},Xa=[],ti={name:"Communities",components:{UploadButton:Ke,DeleteDialog:ia},data(){return{search:"",headers:[{text:"Code",value:"Code"},{text:"Nom",value:"Name"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,delDlg:!1,item:{Code:null,Name:null},dlgTitle:"Nouvelle intercommunalité",dlgBtn:"Créer",menu:null}},methods:{remove(t){this.item.ID=t.ID,this.delDlg=!0},modify(t){this.item.ID=t.ID,this.item.Name=t.Name,this.item.Code=t.Code,this.dlgTitle="Modifier l'intercommunalité",this.dlgBtn="Modifier",this.dialog=!0},add(t){this.item.ID=null,this.item.Name=null,this.item.Code=null,this.dlgTitle="Nouvelle intercommunalité",this.dlgBtn="Créer",this.dialog=!0},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?Dt:It;await this.$store.dispatch(t,this.item),this.dialog=!1}},async delConfirm(){await this.$store.dispatch(wt,this.item.ID),this.delDlg=!1},upload(t){this.$store.dispatch(kt,t)}},computed:{items(){return this.$store.state.communities.communitiesList},loading(){return 0!==this.$store.state.loading.loading},disabled(){return null===this.item.Name||""===this.item.Name||null===this.item.Code||""===this.item.code}}},ei=ti,ai=Object(Gt["a"])(ei,za,Xa,!1,null,null,null),ii=ai.exports;Qt()(ai,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sd6:"","offset-sd3":"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (code, nom)"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"InseeCode",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.InseeCode))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v("\n            "+t._s(t._f("nullable")(e.item.CommunityName))+"\n          ")]),a("td",[a("v-icon",[t._v("\n              "+t._s(e.item.QPV?"check_box":"check_box_outline_blank")+"\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",flat:"",icon:""},on:{click:function(a){return t.modify(e.item)}}},s),[a("v-icon",[t._v("create")])],1)]}}],null,!0)},[t._v("\n              Modifier\n            ")])],1),a("td",{staticClass:"pr-0 pl-0"},[a("v-tooltip",{attrs:{left:""},scopedSlots:t._u([{key:"activator",fn:function(i){var s=i.on;return[a("v-btn",t._g({staticClass:"pa-0",attrs:{color:"primary",small:"",icon:"",flat:""},on:{click:function(a){return t.remove(e.item)}}},s),[a("v-icon",[t._v("delete")])],1)]}}],null,!0)},[t._v("\n              Supprimer\n            ")])],1)]}}])}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getCities},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("upload-button",{on:{fileChosen:function(e){return t.upload(e)}}}),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:t.add}},[t._v("Créer")])],1),a("v-dialog",{attrs:{persistent:"",overlay:!1,"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v(t._s(t.dlgTitle))]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Code INSEE"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.InseeCode,callback:function(e){t.$set(t.item,"InseeCode",e)},expression:"item.InseeCode"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Nom"},on:{keyup:[function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;t.dialog=!1},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save(e)}]},model:{value:t.item.Name,callback:function(e){t.$set(t.item,"Name",e)},expression:"item.Name"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.communities,"item-text":"Name","item-value":"ID",label:"Intercommunalité"},model:{value:t.item.CommunityID,callback:function(e){t.$set(t.item,"CommunityID",e)},expression:"item.CommunityID"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-checkbox",{attrs:{label:"QPV"},model:{value:t.item.QPV,callback:function(e){t.$set(t.item,"QPV",e)},expression:"item.QPV"}})],1)],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer la commune définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},ri=[],oi={name:"Cities",components:{UploadButton:Ke,DeleteDialog:ia},data(){return{search:"",headers:[{text:"Code",value:"InseeCode"},{text:"Nom",value:"Name"},{text:"Interco",value:"Community"},{text:"QPV",value:"QPV"},{text:"",value:"",sortable:!1,width:"1%"},{text:"",value:"",sortable:!1,width:"1%"}],dialog:!1,delDlg:!1,item:{InseeCode:null,Name:null,CommunityID:null,QPV:!1},dlgTitle:"Nouvelle commune",dlgBtn:"Créer",menu:null,pagination:{}}},methods:{newSearch(t){this.search=t,this.getCities()},remove(t){this.item.InseeCode=t.InseeCode,this.delDlg=!0},modify(t){this.item={...t},this.dlgTitle="Modifier la commune",this.dlgBtn="Modifier",this.dialog=!0},add(t){this.item.Name=null,this.item.InseeCode=null,this.item.CommunityID=null,this.item.QPV=!1,this.dlgTitle="Nouvelle commune",this.dlgBtn="Créer",this.dialog=!0},async save(){if(!this.disabled){let t="Créer"===this.dlgBtn?Ct:yt;await this.$store.dispatch(t,{Name:this.item.Name,InseeCode:Ae()(this.item.InseeCode),CommunityID:this.item.CommunityID,QPV:this.item.QPV}),this.dialog=!1}},async delConfirm(){await this.$store.dispatch(xt,this.item.InseeCode),this.delDlg=!1},upload(t){this.$store.dispatch(bt,t)},async getCities(){await this.$store.dispatch(gt,{Search:this.search,Page:this.pagination.page||0})}},computed:{communities(){return this.$store.state.communities.communitiesList},items(){return this.$store.state.cities.citiesList},itemsCount(){return this.$store.state.cities.citiesItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)},loading(){return 0!==this.$store.state.loading.loading},disabled(){return null===this.item.Name||""===this.item.Name||!/^\d{5}$/.test(this.item.InseeCode)}}},ni=oi,li=Object(Gt["a"])(ni,si,ri,!1,null,null,null),ci=li.exports;Qt()(li,{VAutocomplete:na["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VCheckbox:we["a"],VContainer:Xt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VPagination:la["a"],VSpacer:pe["a"],VTextField:he["a"],VTooltip:Ne["a"]});var mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (nom, code, bénéficiaire)"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newYear,expression:"newYear",arg:"500ms"}],attrs:{label:"À partir de l'année",rules:[t.yearRule]}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"select-all":"","hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[a("th",[a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,primary:"","hide-details":"",disabled:!t.hasLinked},on:{click:function(e){return e.stopPropagation(),t.toggleAll(e)}}})],1),t._l(e.headers,function(e){return a("th",{key:e.text},[t._v("\n              "+t._s(e.text)+"\n            ")])})],2)]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":"",disabled:!e.item.Linked},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Budget))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.FullCode))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Beneficiary))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n              "+t._s(e.item.SoldOut?"check_box":"check_box_outline_blank")+"\n            ")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getCommitments},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{flat:"",small:"",color:"primary",disabled:0===t.selected.length},on:{click:function(e){return t.unlink()}}},[t._v("Supprimer le lien")]),a("v-spacer"),a("v-btn",{attrs:{flat:"",small:"",color:"primary"},on:{click:function(e){return t.excelExport()}}},[t._v("Export Excel")]),a("upload-button",{on:{fileChosen:function(e){return t.upload(e)}}})],1)],1)},di=[],ui={name:"Commitments",components:{UploadButton:Ke},data(){return{search:"",year:0,headers:[{text:"Date",value:"CreationDate"},{text:"Budget",value:"Budget"},{text:"Code",value:"FullCode"},{text:"Objet",value:"Name"},{text:"Bénéficiaire",value:"Beneficiary"},{text:"Montant",value:"Value"},{text:"Soldé",value:"SoldOut"}],pagination:{},selected:[]}},methods:{upload(t){this.$store.dispatch(St,t)},newSearch(t){this.search=t,this.getCommitments()},newYear(t){/^20\d{2}$/.test(t)&&(this.year=Number(t),this.getCommitments()),""!==t&&t||(this.year=0,this.getCommitments())},yearRule(t){return/^20\d{2}$/.test(t)||""===t||"Année attendue"},async getCommitments(){await this.$store.dispatch(Nt,{Year:this.year,Search:this.search,Page:this.pagination.page})},excelExport(){this.$store.dispatch(Pt,{Year:this.year,Search:this.search})},unlink(){let t=this.selected.map(t=>t.ID);this.$store.dispatch(Vt,t)}},computed:{items(){return this.$store.state.commitments.commitmentsList.map(t=>({ID:t.ID,Year:t.Year,FullCode:t.Code+"/"+t.Number+"/"+t.Line,CreationDate:t.CreationDate,Name:t.Name,Beneficiary:t.BeneficiaryName,Value:t.Value,Budget:"["+t.Sector+"] "+t.ActionName,CoproID:t.CoproID,RenewProjectID:t.RenewProjectID,HousingID:t.HousingID,Linked:t.CoproID||t.RenewProjectID||t.HousingID,SoldOut:t.SoldOut}))},hasLinked(){return this.items.some(t=>t.Linked)},loading(){return 0!==this.$store.state.loading.loading},itemsCount(){return this.$store.state.commitments.commitmentsItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)}}},pi=ui,hi=Object(Gt["a"])(pi,mi,di,!1,null,null,null),vi=hi.exports;Qt()(hi,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCheckbox:we["a"],VDataTable:ke["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VPagination:la["a"],VSpacer:pe["a"],VTextField:he["a"]});var fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (engagement, bénéficiaire, action)"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newYear,expression:"newYear",arg:"500ms"}],attrs:{label:"À partir de l'année",rules:[t.yearRule]}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Number))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CommitmentDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.CommitmentName))]),a("td",{staticClass:"text-xs-right"},[t._v("\n            "+t._s(t._f("currency")(e.item.CommitmentValue))+"\n          ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Beneficiary))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Budget))])]}}])}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getPayments},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",small:"",color:"primary"},on:{click:function(e){return t.excelExport()}}},[t._v("Export Excel")]),a("upload-button",{on:{fileChosen:function(e){return t.upload(e)}}})],1)],1)},gi=[],Ci={name:"Payments",components:{UploadButton:Ke},data(){return{search:"",year:0,headers:[{text:"Date pmt",value:"CreationDate"},{text:"Année/num pmt",value:"Number"},{text:"Montant pmt",value:"Value"},{text:"Date egt",value:"CommitmentDate"},{text:"Nom egt",value:"CommitmentName"},{text:"Montant egt",value:"CommitmentValue"},{text:"Bénéficiaire",value:"Beneficiary"},{text:"Budget",value:"Budget"}],pagination:{}}},methods:{upload(t){this.$store.dispatch(Et,t)},newSearch(t){this.search=t,this.getPayments()},newYear(t){/^20\d{2}$/.test(t)&&(this.year=Number(t),this.getPayments()),""!==t&&t||(this.year=0,this.getPayments())},yearRule(t){return/^20\d{2}$/.test(t)||""===t||"Année attendue"},async getPayments(){await this.$store.dispatch(At,{Year:this.year,Search:this.search,Page:this.pagination.page})},excelExport(){this.$store.dispatch(Lt,{Year:this.year,Search:this.search})}},computed:{items(){return this.$store.state.payments.paymentsList.map(t=>({CreationDate:t.CreationDate,Number:"["+t.Year+"] "+t.Number,Value:t.Value,CommitmentDate:t.CommitmentDate,CommitmentValue:t.CommitmentValue,CommitmentName:t.CommitmentName,Beneficiary:t.Beneficiary,Budget:"["+t.Sector+"] "+t.ActionName}))},loading(){return 0!==this.$store.state.loading.loading},itemsCount(){return this.$store.state.payments.paymentsItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)}}},yi=Ci,xi=Object(Gt["a"])(yi,fi,gi,!1,null,null,null),bi=xi.exports;Qt()(xi,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VDataTable:ke["a"],VDivider:ae["a"],VFlex:ie["a"],VLayout:re["a"],VPagination:la["a"],VSpacer:pe["a"],VTextField:he["a"]});var _i={name:"Settings",components:{BudgetSector:Oa,BudgetAction:Ga,Commission:Ka,Communities:ii,Cities:ci,Commitments:vi,Payments:bi},data(){return{active:null}},created(){this.$store.dispatch(it)}},Di=_i,Ii=Object(Gt["a"])(Di,Ra,Ta,!1,null,null,null),wi=Ii.exports;Qt()(Ii,{VCard:Wt["a"],VCardTitle:zt["a"],VTab:ca["a"],VTabItem:ma["a"],VTabs:da["a"]});var ki=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Accueil")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",md6:"","pa-2":""}},[a("div",{staticClass:"title pb-2"},[t._v("Engagements")]),a("g-chart",{attrs:{data:t.commitments,options:t.chartOptions,type:"LineChart",settings:{packages:["corechart"],language:"fr"}}})],1),a("v-flex",{attrs:{xs12:"",md6:"","pa-2":""}},[a("div",{staticClass:"title pb-2"},[t._v("Paiements")]),a("g-chart",{attrs:{data:t.payments,options:t.chartOptions,type:"LineChart",settings:{packages:["corechart"],language:"fr"}}})],1)],1)],1)],1)},Ni=[],Si=a("cb43");const Pi=["Jan","Fev","Mar","Avr","Mai","Jun","Jul","Aoû","Sep","Oct","Nov","Dec"],Vi=(new Date).getFullYear();var Ri={name:"Home",components:{GChart:Si["GChart"]},data(){return{chartOptions:{fontName:"Roboto",vAxis:{format:"short"},height:500,legend:{position:"none"},chartArea:{left:50,top:50,width:"100%",height:400},series:{0:{color:"#CE93D8",lineWidth:4},1:{color:"#4A148C",lineWidth:4}}}}},computed:{currentCommitments(){return this.$store.state.home.currentYearCommitments},currentPayments(){return this.$store.state.home.currentYearPayments},previousCommitments(){return this.$store.state.home.previousYearCommitments},previousPayments(){return this.$store.state.home.previousYearPayments},commitments(){return this.getChartDatas(this.previousCommitments,this.currentCommitments)},payments(){return this.getChartDatas(this.previousPayments,this.currentPayments)}},methods:{getChartDatas(t,e){let a=[[{label:"Mois",type:"string"},{label:String(Vi-1),type:"number"},{label:String(Vi),type:"number"}]],i=t.length,s=e.length;for(let r=0;r<12;r++)a.push([Pi[r],r<i?t[r]:null,r<s?e[r]:null]);return a}},created(){this.$store.dispatch(Ot)}},Ti=Ri,Ai=Object(Gt["a"])(Ti,ki,Ni,!1,null,null,null),Ei=Ai.exports;Qt()(Ai,{VCard:Wt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VFlex:ie["a"],VLayout:re["a"]});var Li=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (code, nom)"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Code))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",[a("v-btn",{attrs:{small:"",flat:"",color:"primary"},on:{click:function(a){return t.details(e.item)}}},[t._v("Détails")])],1)]}}])}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)],1)},$i=[],Bi={name:"Beneficiaries",data(){return{search:"",year:0,headers:[{text:"Code",value:"Code",sortable:!1},{text:"Nom",value:"Name",sortable:!1},{text:"Détails",value:"",sortable:!1}],pagination:{}}},methods:{newSearch(t){this.search=t,this.getBeneficiaries()},async getBeneficiaries(){await this.$store.dispatch($t,{Search:this.search,Page:this.pagination.page})},details({Name:t,ID:e}){this.$router.push({name:"Beneficiary",params:{ID:e,Name:t}})}},mounted(){this.$store.dispatch($t,{Page:1,Search:this.search})},computed:{items(){return this.$store.state.beneficiaries.beneficiariesList},loading(){return 0!==this.$store.state.loading.loading},itemsCount(){return this.$store.state.beneficiaries.beneficiariesItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)}},watch:{pagination:{handler(){this.getBeneficiaries()},deep:!0}}},Oi=Bi,Fi=Object(Gt["a"])(Oi,Li,$i,!1,null,null,null),Mi=Fi.exports;Qt()(Fi,{VBtn:Jt["a"],VCard:Wt["a"],VDataTable:ke["a"],VFlex:ie["a"],VLayout:re["a"],VPagination:la["a"],VTextField:he["a"]});var ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Situation de "+t._s(t.beneficiaryName))]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","pr-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (libellé)"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-flex",{attrs:{xs12:"",sm6:""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.yearChanged,expression:"yearChanged",arg:"500ms"}],attrs:{label:"À partir de l'année"},model:{value:t.year,callback:function(e){t.year=e},expression:"year"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("date")(e.item.Date)))]),a("td",[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-right"},[t._v("\n              "+t._s(t._f("currency")(e.item.Available))+"\n            ")])]}}])}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getDatas},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1)],1)],1)},Ui=[],Yi={name:"Beneficiary",data(){return{search:"",pagination:{},year:0,headers:[{text:"Date",value:"Date",align:"center"},{text:"Libellé",value:"Name",align:"center"},{text:"Montant",value:"Value",align:"center"},{text:"RAM",value:"Available",align:"center"}]}},methods:{newSearch(t){this.search=t,this.getDatas()},yearChanged(t){if(null===t||""===t)return this.year=0,void this.getDatas();/^20\d{2}$/.test(t)&&(this.year=Number(t),this.getDatas())},getDatas(){this.beneficiaryID&&this.$store.dispatch(Bt,{ID:this.beneficiaryID,Search:this.search,Year:this.year,Page:this.pagination.page})}},computed:{beneficiaryID(){return this.$route.params.ID},beneficiaryName(){return this.$route.params.Name},loading(){return 0!==this.$store.state.loading.loading},itemsCount(){return this.$store.state.beneficiary.beneficiaryItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)},items(){return this.$store.state.beneficiary.beneficiaryDatas}},mounted(){this.getDatas()}},Hi=Yi,Gi=Object(Gt["a"])(Hi,ji,Ui,!1,null,null,null),Zi=Gi.exports;Qt()(Gi,{VCard:Wt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VDataTable:ke["a"],VFlex:ie["a"],VLayout:re["a"],VPagination:la["a"],VTextField:he["a"]});var Qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("Prévisions")]),a("v-tabs",{attrs:{"slider-color":"primary",color:"secondary"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Ratios")]),a("v-tab-item",[a("Ratios")],1),a("v-tab",{attrs:{ripple:""}},[t._v("Prévisions CP")]),a("v-tab-item",[a("PaymentForecasts")],1)],1)],1)},qi=[],Ji=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"","pa-2":"",sm6:"","offset-sm3":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.yearChanged,expression:"yearChanged",arg:"500ms"}],attrs:{label:"Année",rules:[t.yearRule]}})],1),a("v-flex",{attrs:{xs12:"","pr-2":"","pl-2":""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.Index))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.SectorName))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("percentage")(e.item.Ratio)))])]}}])})],1),a("v-flex",{attrs:{xs12:"","pt-2":""}},[a("v-divider")],1),a("v-flex",{staticClass:"text-xs-right",attrs:{xs12:""}},[t.isAdmin?a("v-btn",{attrs:{flat:"",color:"primary",disabled:t.disabled},on:{click:t.save}},[t._v("Sauver")]):t._e()],1)],1)},Wi=[];const Ki=t=>/^20\d{2}$/.test(t);var zi={name:"Ratios",data(){return{headers:[{text:"Année n+",value:"Index",align:"center"},{text:"Secteur",value:"SectorName",align:"center"},{text:"Taux",value:"Ratio",align:"center"}],disabled:!0,year:0}},methods:{yearRule:t=>!!Ki(t)||"Année de type 2000 attendue",yearChanged(t){Ki(t)&&(this.year=Number(t),this.$store.dispatch(Ft,{Year:this.year}),this.disabled=!1)},save(){this.$store.dispatch(Mt,{Year:this.year,Ratios:this.items})}},computed:{items(){return this.$store.state.ratios.ratiosList.map((t,e)=>({...t,ID:e}))},loading(){return 0!==this.$store.state.loading.loading},isAdmin(){return this.$store.getters.isAdmin}}},Xi=zi,ts=Object(Gt["a"])(Xi,Ji,Wi,!1,null,null,null),es=ts.exports;Qt()(ts,{VBtn:Jt["a"],VDataTable:ke["a"],VDivider:ae["a"],VFlex:ie["a"],VLayout:re["a"],VTextField:he["a"]});var as=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-layout",{staticClass:"pa-2",attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-select",{attrs:{items:t.years,label:"Engagements de l'année"},model:{value:t.ratioYear,callback:function(e){t.ratioYear=e},expression:"ratioYear"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ActionID",loading:t.loading},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",[a("td",[t._v(t._s(e.item.ActionName))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Y0)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Y1)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Y2)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Y3)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Y4)))])])]}}])},[a("template",{slot:"footer"},[a("tr",{staticClass:"body-2"},[a("td",[t._v("Total")]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(t.TY0)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(t.TY1)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(t.TY2)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(t.TY3)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(t.TY4)))])])])],2)],1)],1)},is=[],ss={name:"PaymentForecasts",data(){return{headers:[{text:"Action budgétaire",value:"ActionName"},{text:"Y0",value:"Y0"},{text:"Y1",value:"Y1"},{text:"Y2",value:"Y2"},{text:"Y3",value:"Y3"},{text:"Y4",value:"Y4"}],ratioYear:null,TY0:0,TY1:0,TY2:0,TY3:0,TY4:0}},computed:{items(){return this.$store.state.pmtForecasts.pmtForecastsList},years(){return this.$store.state.ratios.ratiosYears},loading(){return 0!==this.$store.state.loading.loading}},created(){const t=(new Date).getFullYear();for(let e=1;e<6;e++)this.headers[e].text=String(t+e-1);this.$store.dispatch(jt)},watch:{async ratioYear(t){t&&(await this.$store.dispatch(Ut,{Year:t}),this.TY0=0,this.TY1=0,this.TY2=0,this.TY3=0,this.TY4=0,this.items.forEach(t=>{this.TY0+=t.Y0,this.TY1+=t.Y1,this.TY2+=t.Y2,this.TY3+=t.Y3,this.TY4+=t.Y4}))}}},rs=ss,os=Object(Gt["a"])(rs,as,is,!1,null,null,null),ns=os.exports;Qt()(os,{VDataTable:ke["a"],VFlex:ie["a"],VLayout:re["a"],VSelect:Ya["a"]});var ls={name:"Forecasts",components:{Ratios:es,PaymentForecasts:ns},data(){return{active:null}}},cs=ls,ms=Object(Gt["a"])(cs,Qi,qi,!1,null,null,null),ds=ms.exports;Qt()(ms,{VCard:Wt["a"],VCardTitle:zt["a"],VTab:ca["a"],VTabItem:ma["a"],VTabs:da["a"]});var us=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("\n    ["+t._s(t.project?t.project.Reference:"")+"]\n    "+t._s(t.project?t.project.Name:"")+"\n  ")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("table",[a("tr",[a("td",{staticClass:"body-2"},[t._v("Type :")]),a("td",[t._v(t._s(t.project?t.project.PRIN?"PRIN":"PRIR":""))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Commune(s) :")]),a("td",[t._v(t._s(t.cities))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Enveloppe régionale :")]),a("td",[t._v(t._s(t._f("currency")(t.project?t.project.Budget:null)))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Catégorie région :")]),a("td",[t._v(t._s(t._f("number")(t.project?t.project.CompositeIndex:null)))])])])])],1),a("v-tabs",{attrs:{color:"secondary","slider-color":"primary"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Engagements")]),a("v-tab-item",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.commitmentHeaders,items:t.commitments,"item-key":"ID",loading:t.loading,search:t.commitmentSearch},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v("\n            "+t._s(t._f("date")(e.item.ModificationDate))+"\n          ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.BeneficiaryName))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.IrisCode))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n              "+t._s(e.item.SoldOut?"check_box":"check_box_outline_blank")+"\n            ")])],1)]}}])},[a("template",{slot:"footer"},[a("td",{staticClass:"body-2 text-xs-left"},[t._v("Total")]),a("td"),a("td"),a("td"),a("td"),a("td",{staticClass:"text-xs-right body-2"},[t._v("\n            "+t._s(t._f("currency")(t.totalCommitments))+"\n          ")]),a("td")])],2),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.commitmentsExport}},[t._v("Export Excel")])],1),a("v-tab",{attrs:{ripple:""}},[t._v("Paiements")]),a("v-tab-item",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.paymentHeaders,items:t.payments,"item-key":"ID",loading:t.loading,search:"paymentSearch"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v("\n            "+t._s(t._f("date")(e.item.ModificationDate))+"\n          ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("currency")(e.item.Value)))])]}}])},[a("template",{slot:"footer"},[a("td",{staticClass:"body-2 text-xs-left"},[t._v("Total")]),a("td"),a("td",{staticClass:"text-xs-right body-2"},[t._v(t._s(t.totalPayments))])])],2),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.paymentsExport}},[t._v("Export Excel")])],1),a("v-tab",{attrs:{ripple:""}},[t._v("Prévisions")]),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.forecastSearch,callback:function(e){t.forecastSearch=e},expression:"forecastSearch"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.forecastHeaders,items:t.forecasts,"item-key":"ID",loading:t.loading,search:t.forecastSearch},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v("\n                "+t._s(t._f("date")(e.item.CommissionDate))+"\n              ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.CommissionName))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.Comment))]),a("td",{staticClass:"text-xs-center"},[t.hasRenewProjectRight?a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){return t.edit(e.item)}}},[a("v-icon",[t._v("create")])],1):t._e(),t.hasRenewProjectRight?a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){return t.remove(e.item)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)]}}])}),t.hasRenewProjectRight?a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.addForecast}},[t._v("Ajouter")]):t._e()],1)],1)],1),a("v-tab",{attrs:{ripple:""}},[t._v("Rattachements")]),a("v-tab-item",[a("unlinked-commitment",{attrs:{destID:t.project?t.project.ID:0,type:"RenewProject",allowLink:t.hasRenewProjectRight}})],1)],1),a("v-dialog",{attrs:{overlay:!1,persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v(t._s(t.dlgTitle))]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.commissions,loading:t.loading,"hide-no-data":"","hide-selected":"","item-text":"Name","item-value":"ID",label:"Commission",required:"",rules:[t.notNull]},model:{value:t.forecast.CommissionID,callback:function(e){t.$set(t.forecast,"CommissionID",e)},expression:"forecast.CommissionID"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Montant",rules:[t.valueRequired]},model:{value:t.forecast.Value,callback:function(e){t.$set(t.forecast,"Value",e)},expression:"forecast.Value"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Commentaire"},model:{value:t.forecast.Comment,callback:function(e){t.$set(t.forecast,"Comment",e)},expression:"forecast.Comment"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer la prévision définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},ps=[],hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{attrs:{flat:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newSearch,expression:"newSearch",arg:"500ms"}],attrs:{label:"Rechercher (nom, code, bénéficiaire)"}})],1),a("v-flex",{attrs:{xs12:"",sm6:"","pa-2":""}},[a("v-text-field",{directives:[{name:"debounce",rawName:"v-debounce:500ms",value:t.newYear,expression:"newYear",arg:"500ms"}],attrs:{label:"À partir de l'année",rules:[t.yearRule]}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.items,"item-key":"ID",loading:t.loading,"rows-per-page-items":[10],"total-items":t.itemsCount,pagination:t.pagination,"select-all":"","hide-actions":""},on:{"update:pagination":function(e){t.pagination=e}},scopedSlots:t._u([{key:"headers",fn:function(e){return[a("tr",[a("th",[a("v-checkbox",{attrs:{"input-value":e.all,indeterminate:e.indeterminate,color:"primary","hide-details":"",disabled:!t.allowLink},on:{click:function(e){return e.stopPropagation(),t.toggleAll(e)}}})],1),t._l(e.headers,function(e){return a("th",{key:e.text},[t._v("\n              "+t._s(e.text)+"\n            ")])})],2)]}},{key:"items",fn:function(e){return[a("td",[a("v-checkbox",{attrs:{color:"primary","hide-details":"",disabled:!t.allowLink},model:{value:e.selected,callback:function(a){t.$set(e,"selected",a)},expression:"props.selected"}})],1),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Budget))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.FullCode))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Beneficiary))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n              "+t._s(e.item.SoldOut?"check_box":"check_box_outline_blank")+"\n            ")])],1)]}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("div",{staticClass:"text-xs-center pa-2"},[a("v-pagination",{attrs:{length:t.pages,"total-visible":7},on:{input:t.getCommitments},model:{value:t.pagination.page,callback:function(e){t.$set(t.pagination,"page",e)},expression:"pagination.page"}})],1)],1)],1),a("v-divider"),t.allowLink?a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{flat:"",small:"",color:"primary",disabled:0===t.selected.length},on:{click:function(e){return t.link()}}},[t._v("Rattacher")])],1):t._e()],1)},vs=[],fs={name:"UnlinkedCommitments",data(){return{search:"",year:0,headers:[{text:"Date",value:"CreationDate"},{text:"Budget",value:"Budget"},{text:"Code",value:"FullCode"},{text:"Objet",value:"Name"},{text:"Bénéficiaire",value:"Beneficiary"},{text:"Montant",value:"Value"},{text:"Soldé",value:"SoldOut"}],pagination:{},selected:[]}},props:{destID:{type:Number,required:!0},allowLink:{type:Boolean,default:!1},type:{validator:function(t){return-1!==["Copro","RenewProject","Housing"].indexOf(t)}}},methods:{newSearch(t){this.search=t,this.getCommitments()},newYear(t){/^20\d{2}$/.test(t)&&(this.year=Number(t),this.getCommitments()),""!==t&&t||(this.year=0,this.getCommitments())},yearRule(t){return/^20\d{2}$/.test(t)||""===t||"Année attendue"},toggleAll(){this.selected.length?this.selected=[]:this.selected=this.items.slice()},async getCommitments(){await this.$store.dispatch(Rt,{Year:this.year,Search:this.search,Page:this.pagination.page})},link(){if(0!==this.destID){let t=this.selected.map(t=>t.ID);this.$store.dispatch(Tt,{DestID:this.destID,Type:this.type,IDs:t})}}},computed:{items(){return this.$store.state.commitments.unlinkedCommitmentsList.map(t=>({ID:t.ID,Year:t.Year,FullCode:t.Code+"/"+t.Number+"/"+t.Line,CreationDate:t.CreationDate,Name:t.Name,Beneficiary:t.BeneficiaryName,Value:t.Value,Budget:"["+t.Sector+"] "+t.ActionName,CoproID:t.CoproID,RenewProjectID:t.RenewProjectID,HousingID:t.HousingID,Linked:t.CoproID||t.RenewProjectID||t.HousingID,SoldOut:t.SoldOut}))},loading(){return 0!==this.$store.state.loading.loading},itemsCount(){return this.$store.state.commitments.unlinkedCommitmentsItemsCount},pages(){return null==this.pagination.rowsPerPage||null==this.itemsCount?0:Math.ceil(this.itemsCount/this.pagination.rowsPerPage)}},mounted(){this.getCommitments()}},gs=fs,Cs=Object(Gt["a"])(gs,hs,vs,!1,null,null,null),ys=Cs.exports;Qt()(Cs,{VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCheckbox:we["a"],VDataTable:ke["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VPagination:la["a"],VSpacer:pe["a"],VTextField:he["a"]});var xs=a("ca76");const bs={fill:{type:"solid",color:"1F497D"},fontColor:"FFFFFF"};function _s(t,e){let a=t.length,i=[];for(let s=1;s<a&&t[s][0]._value;s++){let a={};e.forEach((e,i)=>{a[e]=t[s][i]._value}),i.push(a)}return i}function Ds(t,e){const a=t[0].map(t=>t._value);if(e.some(t=>!a.includes(t)))throw new Error(`Format de fichier incorrect : champ ${e} obligatoire absent`);return a}async function Is(t,e,a,i,s=null){try{let o=await xs["fromDataAsync"](t);const n=o.sheet(0).usedRange().cells(),l=Ds(n,e);let c=_s(n,l);if("function"===typeof s&&(c=c.map(t=>s(t))),"function"===typeof a)return a(c)}catch(r){"function"===typeof i&&i(r instanceof Error?r.message:"Impossible de lire le fichier")}}function ws(t,e){let a=window.URL.createObjectURL(t),i=document.createElement("a");document.body.appendChild(i),i.href=a,i.download=e,i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}function ks(t){const e=t>25?String.fromCharCode(65+(t-25)/26):"",a=String.fromCharCode(65+t%26);return e+a}function Ns(t){const e=new Date,a=t=>String(t).padStart(2,"0"),i=e.getFullYear()+a(e.getMonth()+1)+a(e.getDate())+"_"+a(e.getHours())+a(e.getMinutes())+a(e.getSeconds());return`${i}${t}.xlsx`}function Ss(t,e,a){t.forEach((t,i)=>{e.cell(i+1).value(t.header).style({...bs,horizontalAlignment:"center"});const s=a.sheet(0).column(i+1);s.width(t.width),t.style&&s.style(t.style)})}function Ps(t,e,a,i){t.forEach((t,s)=>{const r=e.sheet(0).row(s+a);i.forEach((e,i)=>{if(e.hasOwnProperty("formula")){const t=e.formula.replace(/£/g,s+a);r.cell(i+1).formula(t)}else{const a=e.key;r.cell(i+1).value(t[a]||"")}})})}function Vs(t,e,a){const i=t.sheet(0).row(1),s=t.sheet(0).row(e+1);a[0].hasOwnProperty("addTotal")||(i.cell(1).value("Total"),s.cell(1).value("Total")),a.forEach((t,a)=>{if(i.cell(a+1).style(bs),s.cell(a+1).style(bs),t.hasOwnProperty("addTotal")){const t=ks(a),r=`SUBTOTAL(9,${t}3:${t}${e})`;i.cell(a+1).formula(r),s.cell(a+1).formula(r)}})}async function Rs(t,e,a){await xs["fromBlankAsync"]().then(i=>{const s=e.some(t=>t.hasOwnProperty("addTotal")),r=s?3:2,o=s?i.sheet(0).row(2):i.sheet(0).row(1),n=e.length;if(Ss(e,o,i),Ps(t,i,r,e),n>0){const a=r-1,o=a+t.length,l=ks(n-1);i.sheet(0).range(`A${a}:${l}${o}`).autoFilter(),s&&Vs(i,o,e)}i.outputAsync().then(t=>{ws(t,Ns(a))})})}const Ts=t=>/^\d+([,.]\d{1,2})?$/.test(t),As=t=>{return"number"===typeof t?100*t:"string"===typeof t?Ae()(100*t.replace(",",".")):t};var Es={name:"RenewProject",components:{UnlinkedCommitment:ys,DeleteDialog:ia},data(){return{commitmentHeaders:[{text:"Date création",value:"CreationDate",align:"center"},{text:"Date modif.",value:"ModificationDate",align:"center"},{text:"Bénéficiaire",value:"BeneficiaryName",align:"center"},{text:"Objet",value:"Name",align:"center"},{text:"IRIS",value:"IrisCode",align:"center"},{text:"Montant",value:"Value",align:"center"},{text:"Soldé",value:"SoldOut",align:"center"}],commitmentSearch:null,paymentHeaders:[{text:"Date création",value:"CreationDate",align:"center"},{text:"Date modif.",value:"ModificationDate",align:"center"},{text:"Montant",value:"Value",align:"center"}],forecastHeaders:[{text:"Date",value:"CommissionDate",align:"center"},{text:"Nom commission",value:"CommissionName",align:"center"},{text:"Montant",value:"Value",align:"center"},{text:"Commentaire",value:"Comment",align:"center"},{text:"Actions",value:"",align:"center"}],paymentSearch:null,forecastSearch:null,active:null,forecast:{ID:0,CommissionID:null,Value:null,Comment:null,RenewProjectID:this.project?this.project.ID:0},dialog:!1,dlgTitle:"Créer une nouvelle prévision",dlgBtn:"Créer",delDlg:!1,delID:null}},methods:{commitmentsExport(){const t=[{header:"Année",key:"Year",width:6},{header:"Création",key:"CreationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Modification",key:"ModificationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Code",key:"Code",width:10},{header:"Numéro",key:"Number",width:10},{header:"Ligne",key:"Line",width:6},{header:"Libellé",key:"Name",width:20},{header:"Montant",key:"Value",width:14,style:{numberFormat:"#,##0.00"},addTotal:!0},{header:"Bénéficiaire",key:"BeneficiaryName",width:20},{header:"Code IRIS",key:"IrisCode",width:10},{header:"Soldé",key:"SoldOut",width:6}],e=this.commitments.map(({Value:t,SoldOut:e,...a})=>({Value:.01*t,SoldOut:e?"Oui":"Non",...a}));Rs(e,t,"Engagements"+this.project.Reference)},edit(t){this.forecast={...t},this.forecast.Value*=.01,this.dlgTitle="Modifier la prévision",this.dlgBtn="Modifier",this.dialog=!0},remove(t){this.delID=t.ID,this.delDlg=!0},delConfirm(){this.$store.dispatch(at,this.delID),this.delDlg=!1},save(){const t="Créer"===this.dlgBtn?tt:et,e={RenewProjectForecast:{ID:this.forecast.ID,RenewProjectID:this.project.ID,CommissionID:this.forecast.CommissionID,Value:As(this.forecast.Value),Comment:this.forecast.Comment}};this.$store.dispatch(t,e),this.dialog=!1},addForecast(){this.forecast={ID:0,CommissionID:null,Value:null,Comment:null,RenewProjectID:this.project.ID},this.dlgTitle="Créer une nouvelle prévision",this.dlgBtn="Créer",this.dialog=!0},paymentsExport(){},notNull(t){return null!==t||"Une commission doit être choisie"},valueRequired(t){return Ts(t)||"Montant de la prévision nécessaire"}},computed:{project(){return this.$store.state.renewProject.renewProject},loading(){return 0!==this.$store.state.loading.loading},cities(){const t=this.project;return t?t.CityName1+(t.CityName2?","+t.CityName2:"")+(t.CityName3?","+t.CityName3:""):""},commissions(){return this.$store.state.settings.commissionsList},commitments(){return this.$store.state.renewProject.rpCommitments},totalCommitments(){return this.commitments.reduce((t,e)=>t+e.Value,0)},totalPayments(){return this.payments.reduce((t,e)=>t+e.Value,0)},payments(){return this.$store.state.renewProject.rpPayments},forecasts(){return this.$store.state.renewProject.rpForecasts},disabled(){return null===this.forecast.CommissionID||!Ts(this.forecast.Value)},hasRenewProjectRight(){return this.$store.getters.hasRenewProjectRight}},created(){this.$store.dispatch(z,this.$route.params.ID)}},Ls=Es,$s=Object(Gt["a"])(Ls,us,ps,!1,null,null,null),Bs=$s.exports;Qt()($s,{VAutocomplete:na["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTab:ca["a"],VTabItem:ma["a"],VTabs:da["a"],VTextField:he["a"],VTextarea:ua["a"]});var Os=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"white--text primary headline"},[t._v("\n    ["+t._s(t.project?t.project.Reference:"")+"]\n    "+t._s(t.project?t.project.Name:"")+"\n  ")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("table",[a("tr",[a("td",{staticClass:"body-2"},[t._v("Adresse :")]),a("td",[t._v(t._s(t.project?t.project.Address:""))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Commune :")]),a("td",[t._v(t._s(t.project?t.project.CityName:""))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Enveloppe régionale :")]),a("td",[t._v(t._s(t._f("currency")(t.project?t.project.Budget:null)))])]),a("tr",[a("td",{staticClass:"body-2"},[t._v("Date de labellisation :")]),a("td",[t._v(t._s(t._f("date")(t.project?t.project.LabelDate:null)))])])])])],1),a("v-tabs",{attrs:{color:"secondary","slider-color":"primary"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("v-tab",{attrs:{ripple:""}},[t._v("Engagements")]),a("v-tab-item",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.commitmentHeaders,items:t.commitments,"item-key":"ID",loading:t.loading,search:t.commitmentSearch},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v("\n            "+t._s(t._f("date")(e.item.ModificationDate))+"\n          ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.BeneficiaryName))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.Name))]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.IrisCode))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-center"},[a("v-icon",[t._v("\n              "+t._s(e.item.SoldOut?"check_box":"check_box_outline_blank")+"\n            ")])],1)]}}])},[a("template",{slot:"footer"},[a("td",{staticClass:"body-2 text-xs-left"},[t._v("Total")]),a("td"),a("td"),a("td"),a("td"),a("td",{staticClass:"text-xs-right body-2"},[t._v("\n            "+t._s(t._f("currency")(t.totalCommitments))+"\n          ")]),a("td")])],2),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.commitmentsExport}},[t._v("Export Excel")])],1),a("v-tab",{attrs:{ripple:""}},[t._v("Paiements")]),a("v-tab-item",[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.paymentHeaders,items:t.payments,"item-key":"ID",loading:t.loading,search:"paymentSearch"},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("date")(e.item.CreationDate)))]),a("td",{staticClass:"text-xs-left"},[t._v("\n            "+t._s(t._f("date")(e.item.ModificationDate))+"\n          ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(t._f("currency")(e.item.Value)))])]}}])},[a("template",{slot:"footer"},[a("td",{staticClass:"body-2 text-xs-left"},[t._v("Total")]),a("td"),a("td",{staticClass:"text-xs-right body-2"},[t._v(t._s(t.totalPayments))])])],2),a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.paymentsExport}},[t._v("Export Excel")])],1),a("v-tab",{attrs:{ripple:""}},[t._v("Prévisions")]),a("v-tab-item",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:"",sm6:"","offset-sm3":""}},[a("v-text-field",{attrs:{label:"Rechercher"},model:{value:t.forecastSearch,callback:function(e){t.forecastSearch=e},expression:"forecastSearch"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.forecastHeaders,items:t.forecasts,"item-key":"ID",loading:t.loading,search:t.forecastSearch},scopedSlots:t._u([{key:"items",fn:function(e){return[a("td",{staticClass:"text-xs-left"},[t._v("\n                "+t._s(t._f("date")(e.item.CommissionDate))+"\n              ")]),a("td",{staticClass:"text-xs-left"},[t._v(t._s(e.item.CommissionName))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(t._f("currency")(e.item.Value)))]),a("td",{staticClass:"text-xs-right"},[t._v(t._s(e.item.Comment))]),a("td",{staticClass:"text-xs-center"},[t.hasCoproRight?a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){return t.edit(e.item)}}},[a("v-icon",[t._v("create")])],1):t._e(),t.hasCoproRight?a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(a){return t.remove(e.item)}}},[a("v-icon",[t._v("delete")])],1):t._e()],1)]}}])}),t.hasCoproRight?a("v-btn",{attrs:{color:"primary",flat:""},on:{click:t.addForecast}},[t._v("Ajouter")]):t._e()],1)],1)],1),a("v-tab",{attrs:{ripple:""}},[t._v("Rattachements")]),a("v-tab-item",[a("unlinked-commitment",{attrs:{destID:t.project?t.project.ID:0,type:"Copro",allowLink:t.hasCoproRight}})],1)],1),a("v-dialog",{attrs:{overlay:!1,persistent:"","max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"primary white--text headline"},[t._v("\n        "+t._s(t.dlgTitle)+"\n      ")]),a("v-card-text",[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs12:""}},[a("v-autocomplete",{attrs:{items:t.commissions,loading:t.loading,"hide-no-data":"","hide-selected":"","item-text":"Name","item-value":"ID",label:"Commission",required:"",rules:[t.notNull]},model:{value:t.forecast.CommissionID,callback:function(e){t.$set(t.forecast,"CommissionID",e)},expression:"forecast.CommissionID"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Montant",rules:[t.valueRequired]},model:{value:t.forecast.Value,callback:function(e){t.$set(t.forecast,"Value",e)},expression:"forecast.Value"}})],1),a("v-flex",{attrs:{xs12:""}},[a("v-textarea",{attrs:{label:"Commentaire"},model:{value:t.forecast.Comment,callback:function(e){t.$set(t.forecast,"Comment",e)},expression:"forecast.Comment"}})],1)],1)],1),a("v-divider"),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",small:"",flat:""},on:{click:function(e){t.dialog=!1}}},[t._v("Annuler")]),a("v-btn",{attrs:{color:"primary",small:"",flat:"",disabled:t.disabled},on:{click:t.save}},[t._v(t._s(t.dlgBtn))])],1)],1)],1),a("delete-dialog",{attrs:{sentence:"Supprimer la prévision définitivement ?"},on:{confirm:t.delConfirm},model:{value:t.delDlg,callback:function(e){t.delDlg=e},expression:"delDlg"}})],1)},Fs=[];const Ms=t=>/^\d+([,.]\d{1,2})?$/.test(t),js=t=>{return"number"===typeof t?100*t:"string"===typeof t?Ae()(100*t.replace(",",".")):t};var Us={name:"Copro",components:{UnlinkedCommitment:ys,DeleteDialog:ia},data(){return{commitmentHeaders:[{text:"Date création",value:"CreationDate",align:"center"},{text:"Date modif.",value:"ModificationDate",align:"center"},{text:"Bénéficiaire",value:"BeneficiaryName",align:"center"},{text:"Objet",value:"Name",align:"center"},{text:"IRIS",value:"IrisCode",align:"center"},{text:"Montant",value:"Value",align:"center"},{text:"Soldé",value:"SoldOut",align:"center"}],commitmentSearch:null,paymentHeaders:[{text:"Date création",value:"CreationDate",align:"center"},{text:"Date modif.",value:"ModificationDate",align:"center"},{text:"Montant",value:"Value",align:"center"}],forecastHeaders:[{text:"Date",value:"CommissionDate",align:"center"},{text:"Nom commission",value:"CommissionName",align:"center"},{text:"Montant",value:"Value",align:"center"},{text:"Commentaire",value:"Comment",align:"center"},{text:"Actions",value:"",align:"center"}],paymentSearch:null,forecastSearch:null,active:null,forecast:{ID:0,CommissionID:null,Value:null,Comment:null,CoproID:this.project?this.project.ID:0},dialog:!1,dlgTitle:"Créer une nouvelle prévision",dlgBtn:"Créer",delDlg:!1,delID:null}},methods:{commitmentsExport(){const t=[{header:"Année",key:"Year",width:6},{header:"Création",key:"CreationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Modification",key:"ModificationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Code",key:"Code",width:10},{header:"Numéro",key:"Number",width:10},{header:"Ligne",key:"Line",width:6},{header:"Libellé",key:"Name",width:20},{header:"Montant",key:"Value",width:14,style:{numberFormat:"#,##0.00"},addTotal:!0},{header:"Bénéficiaire",key:"BeneficiaryName",width:20},{header:"Code IRIS",key:"IrisCode",width:10},{header:"Soldé",key:"SoldOut",width:6}],e=this.commitments.map(({Value:t,SoldOut:e,...a})=>({Value:.01*t,SoldOut:e?"Oui":"Non",...a}));Rs(e,t,"Engagements"+this.project.Reference)},edit(t){this.forecast={...t},this.forecast.Value*=.01,this.dlgTitle="Modifier la prévision",this.dlgBtn="Modifier",this.dialog=!0},remove(t){this.delID=t.ID,this.delDlg=!0},delConfirm(){this.$store.dispatch(Z,this.delID),this.delDlg=!1},save(){const t="Créer"===this.dlgBtn?H:G,e={CoproForecast:{ID:this.forecast.ID,CoproID:this.project.ID,CommissionID:this.forecast.CommissionID,Value:js(this.forecast.Value),Comment:this.forecast.Comment}};this.$store.dispatch(t,e),this.dialog=!1},addForecast(){this.forecast={ID:0,CommissionID:null,Value:null,Comment:null,CoproID:this.project.ID},this.dlgTitle="Créer une nouvelle prévision",this.dlgBtn="Créer",this.dialog=!0},paymentsExport(){},notNull(t){return null!==t||"Une commission doit être choisie"},valueRequired(t){return Ms(t)||"Montant de la prévision nécessaire"}},computed:{project(){return this.$store.state.copro.copro},loading(){return 0!==this.$store.state.loading.loading},commissions(){return this.$store.state.settings.commissionsList},commitments(){return this.$store.state.copro.coproCommitments},totalCommitments(){return this.commitments.reduce((t,e)=>t+e.Value,0)},totalPayments(){return this.payments.reduce((t,e)=>t+e.Value,0)},payments(){return this.$store.state.copro.coproPayments},forecasts(){return this.$store.state.copro.coproForecasts},disabled(){return null===this.forecast.CommissionID||!Ms(this.forecast.Value)},hasCoproRight(){return this.$store.getters.hasCoproRight}},created(){this.$store.dispatch(U,this.$route.params.ID)}},Ys=Us,Hs=Object(Gt["a"])(Ys,Os,Fs,!1,null,null,null),Gs=Hs.exports;Qt()(Hs,{VAutocomplete:na["a"],VBtn:Jt["a"],VCard:Wt["a"],VCardActions:Kt["a"],VCardText:Kt["b"],VCardTitle:zt["a"],VDataTable:ke["a"],VDialog:ee["a"],VDivider:ae["a"],VFlex:ie["a"],VIcon:se["a"],VLayout:re["a"],VSpacer:pe["a"],VTab:ca["a"],VTabItem:ma["a"],VTabs:da["a"],VTextField:he["a"],VTextarea:ua["a"]}),i["a"].use(xe["a"]);var Zs=new xe["a"]({routes:[{path:"/",component:Ei,name:"Home"},{path:"/users",component:Pe,name:"Users"},{path:"/housings",component:ha,name:"Housings"},{path:"/copros",component:Da,name:"Copros"},{path:"/renew_projects",component:Va,name:"RenewProjects"},{path:"/settings",component:wi,name:"Settings"},{path:"/beneficiaries",component:Mi,name:"Beneficiaries"},{path:"/beneficiary",component:Zi,name:"Beneficiary"},{path:"/forecasts",component:ds,name:"Forecasts"},{path:"/renew_project",component:Bs,name:"RenewProject"},{path:"/copro",component:Gs,name:"Copro"}]}),Qs=a("2f62");function qs(t){t(u,!0),t(d,null)}function Js(t,e){t(p);let a="";a="string"===typeof e?e:e.body?e.body.error:"Impossible de récupérer les données",t(d,a)}const Ws={loading:0,errorMsg:""},Ks={loading:t=>0!==t.loading,errorMsg:t=>t.errorMsg},zs={[u](t){t.loading++},[p](t){t.loading>0&&t.loading--},[d](t,e){t.errorMsg=e}};var Xs={state:Ws,getters:Ks,mutations:zs};const tr={token:null,user:null,rights:0,allMenuItems:[{id:1,title:"Accueil",icon:"home",routerLink:{name:"Home"},allowUser:!0,allowObserver:!0},{id:2,title:"Logement social",icon:"location_city",routerLink:{name:"Housings"},allowUser:!0,allowObserver:!0},{id:3,title:"Copropriétés",icon:"domain",routerLink:{name:"Copros"},allowUser:!0,allowObserver:!0},{id:4,title:"Renouvellement urbain",icon:"domain_disabled",routerLink:{name:"RenewProjects"},allowUser:!0,allowObserver:!0},{id:5,title:"Bénéficiaires",icon:"account_circle",routerLink:{name:"Beneficiaries"},allowUser:!0,allowObserver:!0},{id:6,title:"Prévisions",icon:"payment",routerLink:{name:"Forecasts"},allowUser:!0,allowObserver:!0},{id:7,title:"Administration",icon:"settings",routerLink:{name:"Settings"},allowUser:!1,allowObserver:!1},{id:8,title:"Utilisateurs",icon:"account_box",routerLink:{name:"Users"},allowUser:!1,allowObserver:!1}]},er=1,ar=2,ir=4,sr=8,rr=16,or=32,nr=64,lr=er|ir,cr=er|or,mr=er|sr,dr=er|rr,ur=er|nr,pr={isAdmin:t=>t.rights&ar||(t.rights&lr)===lr,isUser:t=>t.rights&er&&0===(t.rights&or),isObserver:t=>(t.rights&cr)===cr,hasCoproRight:t=>t.rights&ar||(t.rights&lr)===lr||(t.rights&mr)===mr,hasRenewProjectRight:t=>t.rights&ar||(t.rights&lr)===lr||(t.rights&dr)===dr,hasHousingRight:t=>t.rights&ar||(t.rights&lr)===lr||(t.rights&ur)===ur,menuItems:(t,e)=>t.allMenuItems.filter(t=>e.isAdmin||e.isObserver&&t.allowObserver||e.isUser&&t.allowUser)},hr={async[y]({commit:t},{email:e,password:a}){qs(t);try{let r=await i["a"].http.post("user/login",{email:e,password:a});t(h,r.body),t(p)}catch(s){401===s.status?Js(t,"Erreur de login ou de mot de passe"):403===s.status?Js(t,"Compte non activé par un administrateur"):Js(t,"Erreur de connexion")}},async[x]({commit:t}){qs(t);try{await i["a"].http.post("user/logout"),t(v),t(p)}catch(e){Js(t,e.body.error)}}},vr={[g](t){t.token=window.localStorage.getItem("PreloruToken"),i["a"].http.headers.common["Authorization"]="Bearer "+t.token;const e=window.localStorage.getItem("PreloruUserName");t.user=e?{name:e}:null;let a=window.localStorage.getItem("PreloruRights");t.rights=a?Number(a):0},[h](t,e){t.token=e.Token,t.user=e.User,t.rights=e.User.Rights,i["a"].http.headers.common["Authorization"]="Bearer "+e.Token,window.localStorage.setItem("PreloruToken",e.Token),window.localStorage.setItem("PreloruUserName",e.User.name),window.localStorage.setItem("PreloruRights",t.rights)},[v](t){t.token=null,t.user=null,t.isAdmin=!1,i["a"].http.headers.common["Authorization"]="",window.localStorage.removeItem("PreloruToken"),window.localStorage.removeItem("PreloruUserName"),window.localStorage.removeItem("PreloruRights")},[f](t,{token:e}){t.token=e,i["a"].http.headers.common["Authorization"]="Bearer "+e,window.localStorage.setItem("PreloruToken",e)}};var fr={state:tr,mutations:vr,getters:pr,actions:hr};const gr={usersList:[]},Cr={async[b]({commit:t}){qs(t);try{let a=await i["a"].http.get("users");t(b,a.body.User),t(p)}catch(e){Js(t,e)}},async[_]({commit:t},{ID:e,Name:a,Email:s,Password:r,Rights:o}){qs(t);try{let l=await i["a"].http.put(`user/${e}`,{Name:a,Email:s,Password:r,Rights:o});t(_,l.body.User),t(p)}catch(n){Js(t,n)}},async[D]({commit:t},e){qs(t);try{await i["a"].http.delete(`user/${e}`),t(D,e),t(p)}catch(a){Js(t,a)}},async[I]({commit:t},{Name:e,Email:a,Password:s,Rights:r}){qs(t);try{let n=await i["a"].http.post("user",{Name:e,Email:a,Password:s,Rights:r});t(I,n.body.User),t(p)}catch(o){Js(t,o)}}},yr={[b](t,e){t.usersList=[...e]},[_](t,e){let a=t.usersList.findIndex(t=>t.ID===e.ID);t.usersList.splice(a,1,e)},[D](t,e){let a=t.usersList.findIndex(t=>t.ID===e);t.usersList.splice(a,1)},[I](t,e){t.usersList.push(e)}};var xr={state:gr,actions:Cr,mutations:yr};const br={housingsList:[],housingsPage:0,housingsItemsCount:0,housingForecastsList:[]},_r={async[w]({commit:t}){qs(t);try{let a=await i["a"].http.get("housings");t(w,a.body.Housing),t(p)}catch(e){Js(t,e)}},async[k]({commit:t},{Page:e,Search:a,Lists:s}){qs(t);try{let{body:o}=await i["a"].http.get("housings/paginated",{params:{Page:e,Search:a,Lists:s}});t(k,o),t(ft,o.City),t(ut,o.Commission),t(lt,o.BudgetAction),t(p)}catch(r){Js(t,r)}},async[N]({commit:t},{Reference:e,Address:a,ZipCode:s,PLUS:r,PLAI:o,PLS:n,ANRU:l}){qs(t);try{let m=await i["a"].http.post("housing",{Housing:{Reference:e,Address:a,ZipCode:s,PLUS:r,PLAI:o,PLS:n,ANRU:l}});t(N,m.body.Housing),t(p)}catch(c){Js(t,c)}},async[S]({commit:t},{ID:e,Reference:a,Address:s,ZipCode:r,PLUS:o,PLAI:n,PLS:l,ANRU:c}){qs(t);try{let d=await i["a"].http.put("housing",{Housing:{ID:e,Reference:a,Address:s,ZipCode:r,PLUS:o,PLAI:n,PLS:l,ANRU:c}});t(S,d.body.Housing),t(p)}catch(m){Js(t,m)}},async[P]({commit:t},e){qs(t);try{await i["a"].http.delete(`housing/${e}`),t(P,e),t(p)}catch(a){Js(t,a)}},async[V]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("housings",{Housing:t}),r=t=>({Reference:t.Reference,Address:t.Address,ZipCode:t.ZipCode?Ae()(t.ZipCode):null,PLAI:Ae()(t.PLAI),PLUS:Ae()(t.PLUS),PLS:Ae()(t.PLS),ANRU:Boolean(t.ANRU)});await Is(e,["Reference","Address","PLAI","PLUS","PLS","ANRU"],s,e=>{Js(t,e)},r),t(p)}catch(a){Js(t,a)}},async[R]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("housing/commitments",{HousingCommitmentBach:t});await Is(e,["Reference","IRISCode"],s,e=>{Js(t,e)},t=>({Reference:String(t.Reference),IRISCode:String(t.IRISCode)})),t(p)}catch(a){Js(t,a)}},async[T]({commit:t}){qs(t);try{let{body:a}=await i["a"].http.get("housing_forecasts");t(T,a.HousingForecast),t(p)}catch(e){Js(t,e)}},async[A]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.post("housing_forecast",{HousingForecast:e});t(A,s.HousingForecast),t(p)}catch(a){Js(t,a)}},async[E]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.put("housing_forecast",{HousingForecast:e});t(E,s.HousingForecast),t(p)}catch(a){Js(t,a)}},async[L]({commit:t},e){qs(t);try{await i["a"].http.delete(`housing_forecast/${e.ID}`),t(L,e),t(p)}catch(a){Js(t,a)}}},Dr={[w](t,e){t.housingsList=[...e]},[k](t,e){t.housingsList=[...e.Housing],t.housingsPage=e.Page,t.housingsItemsCount=e.ItemsCount},[N](t,e){t.housingsList.push(e)},[S](t,e){let a=t.housingsList.findIndex(t=>t.ID===e.ID);t.housingsList.splice(a,1,e)},[P](t,e){let a=t.housingsList.findIndex(t=>t.ID===e);t.housingsList.splice(a,1)},[T](t,e){t.housingForecastsList=[...e]},[A](t,e){t.housingForecastsList.push(e)},[E](t,e){let a=t.housingForecastsList.findIndex(t=>t.ID===e.ID);t.housingForecastsList.splice(a,1,e)},[L](t,e){let a=t.housingForecastsList.findIndex(t=>t.ID===e.ID);t.housingForecastsList.splice(a,1)}};var Ir={state:br,actions:_r,mutations:Dr};const wr={coprosList:[]},kr={async[$]({commit:t}){qs(t);try{let a=await i["a"].http.get("copro");t($,a.body.Copro),t(p)}catch(e){Js(t,e)}},async[B]({commit:t},{Reference:e,Name:a,Address:s,ZipCode:r,LabelDate:o,Budget:n}){qs(t);try{let c=await i["a"].http.post("copro",{Copro:{Reference:e,Name:a,Address:s,ZipCode:r,LabelDate:o,Budget:n}});t(B,c.body.Copro),t(p)}catch(l){Js(t,l)}},async[O]({commit:t},{ID:e,Reference:a,Name:s,Address:r,ZipCode:o,LabelDate:n,Budget:l}){qs(t);try{let m=await i["a"].http.put("copro",{Copro:{ID:e,Reference:a,Name:s,Address:r,ZipCode:o,LabelDate:n,Budget:l}});t(O,m.body.Copro),t(p)}catch(c){Js(t,c)}},async[F]({commit:t},e){qs(t);try{await i["a"].http.delete(`copro/${e}`),t(F,e),t(p)}catch(a){Js(t,a)}},async[M]({commit:t},e){qs(t);try{await Is(e,["Reference","Name","Address","ZipCode"],t=>i["a"].http.post("copros",{Copro:t}),e=>Js(t,e),t=>({Reference:t.Reference,Name:t.Name&&t.Name.length>0?t.Name:t.Address,Address:t.Address,ZipCode:Ae()(t.ZipCode),LabelDate:t.LabelDate,Budget:t.Budget?100*Ae()(t.Budget):null})),t(p)}catch(a){Js(t,a)}},async[j]({commit:t},e){qs(t);try{await Is(e,["Reference","IRISCode"],t=>i["a"].http.post("copro/commitments",{CoproCommitmentBatch:t}),e=>Js(t,e),t=>({Reference:String(t.Reference),IRISCode:String(t.IRISCode)})),t(p)}catch(a){Js(t,a)}}},Nr={[$](t,e){t.coprosList=[...e]},[B](t,e){t.coprosList.push(e)},[O](t,e){let a=t.coprosList.findIndex(t=>t.ID===e.ID);t.coprosList.splice(a,1,e)},[F](t,e){let a=t.coprosList.findIndex(t=>t.ID===e);t.coprosList.splice(a,1)}};var Sr={state:wr,actions:kr,mutations:Nr};const Pr={renewProjectsList:[]},Vr={async[Q]({commit:t}){qs(t);try{let a=await i["a"].http.get("renew_projects");t(Q,a.body.RenewProject),t(ft,a.body.City),t(p)}catch(e){Js(t,e)}},async[q]({commit:t},e){qs(t);try{let s=await i["a"].http.post("renew_project",{RenewProject:e});t(q,s.body.RenewProject),t(p)}catch(a){Js(t,a)}},async[J]({commit:t},e){qs(t);try{let s=await i["a"].http.put("renew_project",{RenewProject:e});t(J,s.body.RenewProject),t(p)}catch(a){Js(t,a)}},async[W]({commit:t},e){qs(t);try{await i["a"].http.delete(`renew_project/${e}`),t(W,e),t(p)}catch(a){Js(t,a)}},async[K]({commit:t},e){qs(t);try{let s=t=>({Reference:t.Reference,Name:t.Name,PRIN:Boolean(t.PRIN),CityCode1:Ae()(t.CityCode1),CityCode2:Ae()(t.CityCode2),CityCode3:Ae()(t.CityCode3),Budget:Ae()(100*t.Budget),Population:t.Population?Ae()(t.Population):null,CompositeIndex:t.CompositeIndex?Ae()(t.CompositeIndex):null});await Is(e,["Reference","Name","Budget","PRIN","CityCode1","CityCode2","CityCode3","Population","CompositeIndex"],t=>i["a"].http.post("renew_projects",{RenewProject:t}),e=>Js(t,e),s),t(p)}catch(a){Js(t,a)}}},Rr={[Q](t,e){t.renewProjectsList=[...e]},[q](t,e){t.renewProjectsList.push(e)},[J](t,e){let a=t.renewProjectsList.findIndex(t=>t.ID===e.ID);t.renewProjectsList.splice(a,1,e)},[W](t,e){let a=t.renewProjectsList.findIndex(t=>t.ID===e);t.renewProjectsList.splice(a,1)}};var Tr={state:Pr,actions:Vr,mutations:Rr};const Ar={budgetSectorsList:[],budgetActionsList:[],commissionsList:[]},Er={async[it]({commit:t}){qs(t);try{let a=await i["a"].http.get("settings");t(p),t(st,a.body.BudgetSector),t(lt,a.body.BudgetAction),t(ut,a.body.Commission),t(_t,a.body.Community),t(gt,a.body.PaginatedCity),t(At,a.body.PaginatedPayment),t(Nt,a.body.PaginatedCommitment)}catch(e){Js(t,e)}},async[rt]({commit:t},{Name:e,FullName:a}){qs(t);try{let r=await i["a"].http.post("budget_sector",{BudgetSector:{Name:e,FullName:a}});t(p),t(rt,r.body.BudgetSector)}catch(s){Js(t,s)}},async[ot]({commit:t},{ID:e,Name:a,FullName:s}){qs(t);try{let o=await i["a"].http.put("budget_sector",{BudgetSector:{ID:e,Name:a,FullName:s}});t(p),t(ot,o.body.BudgetSector)}catch(r){Js(t,r)}},async[nt]({commit:t},e){qs(t);try{await i["a"].http.delete(`budget_sector/${e}`),t(p),t(nt,e)}catch(a){Js(t,a)}},async[ct]({commit:t},{Code:e,Name:a,SectorID:s}){qs(t);try{let o=await i["a"].http.post("budget_action",{BudgetAction:{Code:e,Name:a,SectorID:s}});t(p),t(ct,o.body.BudgetAction)}catch(r){Js(t,r)}},async[mt]({commit:t},{ID:e,Code:a,Name:s,SectorID:r}){qs(t);try{let n=await i["a"].http.put("budget_action",{BudgetAction:{ID:e,Code:a,Name:s,SectorID:r}});t(p),t(mt,n.body.BudgetAction)}catch(o){Js(t,o)}},async[dt]({commit:t},e){qs(t);try{await i["a"].http.delete(`budget_action/${e}`),t(p),t(dt,e)}catch(a){Js(t,a)}},async[pt]({commit:t},{Name:e,Date:a}){qs(t);try{let r=await i["a"].http.post("commission",{Commission:{Name:e,Date:a}});t(p),t(pt,r.body.Commission)}catch(s){Js(t,s)}},async[ht]({commit:t},{ID:e,Name:a,Date:s}){qs(t);try{let o=await i["a"].http.put("commission",{Commission:{ID:e,Name:a,Date:s}});t(p),t(ht,o.body.Commission)}catch(r){Js(t,r)}},async[vt]({commit:t},e){qs(t);try{await i["a"].http.delete(`commission/${e}`),t(p),t(vt,e)}catch(a){Js(t,a)}}},Lr={[st](t,e){t.budgetSectorsList=[...e]},[rt](t,e){t.budgetSectorsList.push(e)},[ot](t,e){let a=t.budgetSectorsList.findIndex(t=>t.ID===e.ID);t.budgetSectorsList.splice(a,1,e)},[nt](t,e){let a=t.budgetSectorsList.find(t=>t.ID===e);t.budgetSectorsList.splice(a,1)},[lt](t,e){t.budgetActionsList=[...e]},[ct](t,e){t.budgetActionsList.push(e)},[mt](t,e){let a=t.budgetActionsList.findIndex(t=>t.ID===e.ID);t.budgetActionsList.splice(a,1,e)},[dt](t,e){let a=t.budgetActionsList.find(t=>t.ID===e);t.budgetActionsList.splice(a,1)},[ut](t,e){t.commissionsList=[...e]},[pt](t,e){t.commissionsList.push(e)},[ht](t,e){let a=t.commissionsList.findIndex(t=>t.ID===e.ID);t.commissionsList.splice(a,1,e)},[vt](t,e){let a=t.commissionsList.find(t=>t.ID===e);t.commissionsList.splice(a,1)}};var $r={state:Ar,actions:Er,mutations:Lr};const Br={citiesList:[],citiesPage:0,citiesItemsCount:0},Or={async[ft]({commit:t}){qs(t);try{let a=i["a"].http.get("cities");t(p),t(ft,a.body.City)}catch(e){Js(t,e)}},async[Ct]({commit:t},{InseeCode:e,Name:a,CommunityID:s,QPV:r}){qs(t);try{let n=await i["a"].http.post("city",{City:{InseeCode:e,Name:a,CommunityID:s,QPV:r}});t(p),t(Ct,n.body.City)}catch(o){Js(t,o)}},async[yt]({commit:t},{InseeCode:e,Name:a,CommunityID:s,QPV:r}){qs(t);try{let n=await i["a"].http.put("city",{City:{InseeCode:e,Name:a,CommunityID:s,QPV:r}});t(p),t(yt,n.body.City)}catch(o){Js(t,o)}},async[gt]({commit:t},{Page:e,Search:a}){try{qs(t);let r=await i["a"].http.get("cities/paginated",{params:{Page:e,Search:a}});t(gt,r.body),t(p)}catch(s){Js(t,s)}},async[xt]({commit:t},e){qs(t);try{await i["a"].http.delete(`city/${e}`),t(p),t(xt,e)}catch(a){Js(t,a)}},async[bt]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("cities",{City:t}),r=t=>({InseeCode:t.InseeCode,Name:t.Name,CommunityCode:t.CommunityCode&&""!==t.CommunityCode?String(t.CommunityCode):null,QPV:t.QPV}),o=await Is(e,["InseeCode","Name","CommunityCode","QPV"],s,e=>{Js(t,e)},r);t(ft,o.body.City),t(p)}catch(a){Js(t,a)}}},Fr={[ft](t,e){t.citiesList=[...e]},[gt](t,e){t.citiesList=[...e.City],t.citiesPage=e.Page,t.citiesItemsCount=e.ItemsCount},[Ct](t,e){t.citiesList.push(e)},[yt](t,e){let a=t.citiesList.findIndex(t=>t.InseeCode===e.InseeCode);t.citiesList.splice(a,1,e)},[xt](t,e){let a=t.citiesList.findIndex(t=>t.InseeCode===e);t.citiesList.splice(a,1)}};var Mr={state:Br,actions:Or,mutations:Fr};const jr={communitiesList:[]},Ur={async[Dt]({commit:t},{Code:e,Name:a}){qs(t);try{let r=await i["a"].http.post("community",{Community:{Code:e,Name:a}});t(p),t(Dt,r.body.Community)}catch(s){Js(t,s)}},async[It]({commit:t},{ID:e,Code:a,Name:s}){qs(t);try{let o=await i["a"].http.put("community",{Community:{ID:e,Code:a,Name:s}});t(p),t(It,o.body.Community)}catch(r){Js(t,r)}},async[wt]({commit:t},e){qs(t);try{await i["a"].http.delete(`community/${e}`),t(p),t(wt,e)}catch(a){Js(t,a)}},async[kt]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("communities",{Community:t}),r=t=>({Code:String(t.Code),Name:t.Name}),o=await Is(e,["Code","Name"],s,e=>{Js(t,e)},r);t(_t,o.body.Community),t(p)}catch(a){Js(t,a)}}},Yr={[_t](t,e){t.communitiesList=[...e]},[Dt](t,e){t.communitiesList.push(e)},[It](t,e){let a=t.communitiesList.findIndex(t=>t.ID===e.ID);t.communitiesList.splice(a,1,e)},[wt](t,e){let a=t.communitiesList.find(t=>t.ID===e);t.communitiesList.splice(a,1)}};var Hr={state:jr,actions:Ur,mutations:Yr};const Gr={commitmentsList:[],commitmentsPage:0,commitmentsItemsCount:0,unlinkedCommitmentsList:[],unlinkedCommitmentsPage:0,unlinkedCommitmentsItemsCount:0};async function Zr(t){const e=[{header:"Année",key:"Year",width:6},{header:"Secteur",key:"Sector",width:6},{header:"Action",key:"ActionName",width:6},{header:"Création",key:"CreationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Modification",key:"ModificationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Code",key:"Code",width:10},{header:"Numéro",key:"Number",width:10},{header:"Ligne",key:"Line",width:6},{header:"Libellé",key:"Name",width:20},{header:"Montant",key:"Value",width:14,style:{numberFormat:"#,##0.00"},addTotal:!0},{header:"Bénéficiaire",key:"BeneficiaryName",width:20},{header:"Code IRIS",key:"IrisCode",width:10},{header:"Logement",key:"HousingName",width:14},{header:"Copro",key:"CoproName",width:14},{header:"Projet RU",key:"RenewProjectName",width:14}];await Rs(t,e,"Engagements")}const Qr={async[Nt]({commit:t},{Year:e,Page:a,Search:s}){try{qs(t);let o=await i["a"].http.get("commitments/paginated",{params:{Year:e,Page:a,Search:s}});t(Nt,o.body),t(p)}catch(r){Js(t,r)}},async[Rt]({commit:t},{Year:e,Page:a,Search:s}){try{qs(t);let o=await i["a"].http.get("commitments/unlinked",{params:{Year:e,Page:a,Search:s}});t(Rt,o.body),t(p)}catch(r){Js(t,r)}},async[Pt]({commit:t},{Year:e,Search:a}){try{qs(t);let r=await i["a"].http.get("commitments/export",{params:{Year:e,Search:a}});Zr(r.body.ExportedCommitment),t(p)}catch(s){Js(t,s)}},async[St]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("commitments",{Commitment:t}),r=t=>({Year:Number(t.Year),Code:t.Code,Number:Number(t.Number),Line:Number(t.Line),CreationDate:Number(t.CreationDate),ModificationDate:Number(t.ModificationDate),Name:t.Name,Value:Number(t.Value),BeneficiaryCode:Number(t.BeneficiaryCode),BeneficiaryName:t.BeneficiaryName,IrisCode:t.IrisCode?String(t.IrisCode):null,Sector:t.Sector,ActionCode:t.ActionCode?Number(t.ActionCode):null,ActionName:t.ActionName,SoldOut:t.SoldOut});await Is(e,["Year","Code","Number","Line","CreationDate","ModificationDate","Name","Value","BeneficiaryCode","BeneficiaryName","IrisCode","Sector","ActionCode","ActionName","SoldOut"],s,e=>{Js(t,e)},r),t(p)}catch(a){Js(t,a)}},async[Vt]({commit:t},e){qs(t);try{await i["a"].http.post("commitments/unlink",{IDs:e}),t(p)}catch(a){Js(t,a)}},async[Tt]({commit:t},e){qs(t);try{await i["a"].http.post("commitments/link",e),t(p)}catch(a){Js(t,a)}}},qr={[Nt](t,e){t.commitmentsList=[...e.Commitment],t.commitmentsPage=e.Page,t.commitmentsItemsCount=e.ItemsCount},[Rt](t,e){t.unlinkedCommitmentsList=[...e.Commitment],t.unlinkedCommitmentsPage=e.Page,t.unlinkedCommitmentsItemsCount=e.ItemsCount}};var Jr={state:Gr,actions:Qr,mutations:qr};const Wr={paymentsList:[],paymentsPage:0,paymentsItemsCount:0};async function Kr(t){const e=[{header:"Année",key:"Year",width:6},{header:"Création pmt",key:"CreationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Modification pmt",key:"ModificationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Numéro pmt",key:"Number",width:10},{header:"Montant pmt",key:"Value",width:14,style:{numberFormat:"#,##0.00"},addTotal:!0},{header:"Année egt",key:"CommitmentYear",width:10},{header:"Code egt",key:"CommitmentCode",width:10},{header:"Création pmt",key:"CommitmentCreationDate",width:10,style:{numberFormat:"dd/mm/yy"}},{header:"Montant egt",key:"CommitmentValue",width:14,style:{numberFormat:"#,##0.00"},addTotal:!0},{header:"Libellé egt",key:"CommitmentName",width:20},{header:"Bénéficiaire",key:"BeneficiaryName",width:20},{header:"Secteur",key:"Sector",width:6},{header:"Action",key:"ActionName",width:20}];await Rs(t,e,"Paiements")}const zr={async[At]({commit:t},{Year:e,Page:a,Search:s}){try{qs(t);let o=await i["a"].http.get("payments/paginated",{params:{Year:e,Page:a,Search:s}});t(At,o.body),t(p)}catch(r){Js(t,r)}},async[Lt]({commit:t},{Year:e,Search:a}){try{qs(t);let r=await i["a"].http.get("payments/export",{params:{Year:e,Search:a}});Kr(r.body.ExportedPayment),t(p)}catch(s){Js(t,s)}},async[Et]({commit:t},e){qs(t);try{let s=t=>i["a"].http.post("payments",{Payment:t}),r=t=>({CommitmentYear:Number(t.CommitmentYear),CommitmentCode:t.CommitmentCode,CommitmentNumber:Number(t.CommitmentNumber),CommitmentLine:Number(t.CommitmentLine),Year:Number(t.Year),CreationDate:Number(t.CreationDate),ModificationDate:Number(t.ModificationDate),Value:Number(t.Value),Number:Number(t.Number)});await Is(e,["CommitmentYear","CommitmentCode","CommitmentNumber","CommitmentLine","Year","CreationDate","ModificationDate","Value","Number"],s,e=>{Js(t,e)},r),t(p)}catch(a){Js(t,a)}}},Xr={[At](t,e){t.paymentsList=[...e.Payments],t.paymentsPage=e.Page,t.paymentsItemsCount=e.ItemsCount}};var to={state:Wr,actions:zr,mutations:Xr};const eo={beneficiariesList:[],beneficiariesPage:0,beneficiariesItemsCount:0},ao={async[$t]({commit:t},{Page:e,Search:a}){try{qs(t);let r=await i["a"].http.get("beneficiaries/paginated",{params:{Page:e,Search:a}});t($t,r.body),t(p)}catch(s){Js(t,s)}}},io={[$t](t,e){t.beneficiariesList=[...e.Beneficiary],t.beneficiariesPage=e.Page,t.beneficiariesItemsCount=e.ItemsCount}};var so={state:eo,actions:ao,mutations:io};const ro={currentYearCommitments:[],currentYearPayments:[],previousYearCommitments:[],previousYearPayments:[]},oo={async[Ot]({commit:t}){qs(t);try{let a=await i["a"].http.get("home");t(Ot,a.body),t(p)}catch(e){Js(t,e)}}};function no(t){let e=[];for(let a=0,i=1,s=0;a<t.length;i++)t[a].Month===i&&(s=t[a].Value,a++),e.push(s);return e}const lo={[Ot](t,e){t.currentYearCommitments=[...no(e.Commitment.CurrentYear)],t.previousYearCommitments=[...no(e.Commitment.PreviousYear)],t.currentYearPayments=[...no(e.Payment.CurrentYear)],t.previousYearPayments=[...no(e.Payment.PreviousYear)]}};var co={state:ro,actions:oo,mutations:lo};const mo={beneficiaryDatas:[],beneficiaryItemsCount:0,beneficiaryPage:0},uo={async[Bt]({commit:t},{ID:e,Page:a,Search:s,Year:r}){qs(t);try{t(p);let n=await i["a"].http.get(`beneficiary/${e}/datas`,{params:{Page:a,Search:s,Year:r}});t(Bt,n.body)}catch(o){Js(t,o)}}},po={[Bt](t,e){t.beneficiaryDatas=[...e.Datas],t.beneficiaryPage=e.Page,t.beneficiaryItemsCount=e.ItemsCount}};var ho={state:mo,actions:uo,mutations:po};const vo={ratiosList:[],ratiosYears:[]},fo={async[Ft]({commit:t},{Year:e}){qs(t);try{const s=await i["a"].http.get("ratios",{params:{Year:e}});t(Ft,s.body.PmtRatio),t(p)}catch(a){Js(t,a)}},async[Mt]({commit:t},{Ratios:e,Year:a}){qs(t);try{await i["a"].http.post("ratios",{Ratios:e,Year:a}),t(p)}catch(s){Js(t,s)}},async[jt]({commit:t}){qs(t);try{const a=await i["a"].http.get("ratios/years");t(jt,a.body.PmtRatiosYear),t(p)}catch(e){Js(t,e)}}},go={[Ft](t,e){t.ratiosList=[...e]},[jt](t,e){t.ratiosYears=[...e]}};var Co={state:vo,actions:fo,mutations:go};const yo={pmtForecastsList:[]},xo={async[Ut]({commit:t},{Year:e}){qs(t);try{let s=await i["a"].http.get("payments/forecasts",{params:{Year:e}});t(Ut,s.body.PmtForecast),t(p)}catch(a){Js(t,a)}}},bo={[Ut](t,e){t.pmtForecastsList=[...e]}};var _o={state:yo,actions:xo,mutations:bo};const Do={renewProject:null,rpCommitments:[],rpPayments:[],rpForecasts:[]},Io={async[z]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.get(`renew_project/${e}/datas`);t(z,s),t(ut,s.Commission),t(p)}catch(a){Js(t,a)}},async[tt]({commit:t},{RenewProjectForecast:e}){qs(t);try{let{body:s}=await i["a"].http.post("renew_project_forecast",{RenewProjectForecast:e});t(tt,s.RenewProjectForecast),t(p)}catch(a){Js(t,a)}},async[et]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.put("renew_project_forecast",e);t(et,s.RenewProjectForecast),t(p)}catch(a){Js(t,a)}},async[at]({commit:t},e){qs(t);try{await i["a"].http.delete(`renew_project_forecast/${e}`),t(at,e),t(p)}catch(a){Js(t,a)}}},wo={[z](t,e){t.renewProject=e.RenewProject,t.rpCommitments=[...e.Commitment],t.rpPayments=[...e.Payment],t.rpForecasts=[...e.RenewProjectForecast]},[X](t,e){t.rpForecasts=[...e]},[et](t,e){const a=t.rpForecasts.findIndex(t=>t.ID===e.ID);t.rpForecasts.splice(a,1,e)},[at](t,e){const a=t.rpForecasts.findIndex(t=>t.ID===e);t.rpForecasts.splice(a,1)},[tt](t,e){t.rpForecasts.push(e)}};var ko={state:Do,actions:Io,mutations:wo};const No={copro:null,coproCommitments:[],coproPayments:[],coproForecasts:[]},So={async[U]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.get(`copro/${e}/datas`);t(U,s),t(ut,s.Commission),t(p)}catch(a){Js(t,a)}},async[H]({commit:t},{CoproForecast:e}){qs(t);try{let{body:s}=await i["a"].http.post("copro_forecast",{CoproForecast:e});t(H,s.CoproForecast),t(p)}catch(a){Js(t,a)}},async[G]({commit:t},e){qs(t);try{let{body:s}=await i["a"].http.put("copro_forecast",e);t(G,s.CoproForecast),t(p)}catch(a){Js(t,a)}},async[Z]({commit:t},e){qs(t);try{await i["a"].http.delete(`copro_forecast/${e}`),t(Z,e),t(p)}catch(a){Js(t,a)}}},Po={[U](t,e){t.copro=e.Copro,t.coproCommitments=[...e.Commitment],t.coproPayments=[...e.Payment],t.coproForecasts=[...e.CoproForecast]},[Y](t,e){t.coproForecasts=[...e]},[G](t,e){const a=t.coproForecasts.findIndex(t=>t.ID===e.ID);t.coproForecasts.splice(a,1,e)},[Z](t,e){const a=t.coproForecasts.findIndex(t=>t.ID===e);t.coproForecasts.splice(a,1)},[H](t,e){t.coproForecasts.push(e)}};var Vo={state:No,actions:So,mutations:Po};i["a"].use(Qs["a"]);var Ro=new Qs["a"].Store({modules:{loading:Xs,token:fr,users:xr,housings:Ir,copros:Sr,renewProjects:Tr,settings:$r,cities:Mr,communities:Hr,commitments:Jr,payments:to,beneficiaries:so,home:co,beneficiary:ho,ratios:Co,pmtForecasts:_o,renewProject:ko,copro:Vo}}),To=a("28dd"),Ao=a("d1d6"),Eo=a.n(Ao);i["a"].config.productionTip=!1,i["a"].use(To["a"]),i["a"].use(Eo.a),i["a"].http.options.root="http://localhost:5000/api",i["a"].http.interceptors.push((t,e)=>{e(t=>{const e=t.body.error;C.includes(e)&&(Ro.commit(v),Zs.push({name:"Home"}));const a=t.headers.get("Authorization");if(a){const t=a.replace("Bearer ","");Ro.commit(f,{token:t})}})}),i["a"].filter("bool2Str",Fe),i["a"].filter("nullable",Me),i["a"].filter("date",je),i["a"].filter("currency",Ue),i["a"].filter("nullIndex",Ye),i["a"].filter("percentage",He),i["a"].filter("number",Ge),new i["a"]({router:Zs,store:Ro,render:t=>t(ye)}).$mount("#app")}});
//# sourceMappingURL=app.3e377e1f.js.map